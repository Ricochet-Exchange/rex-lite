(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{53124:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]",function(){return s(44087)}])},23857:function(e,t,s){"use strict";var n=s(79264),a=s(91463),l=s.n(a);t.Z=(0,n.Z)({supportedLngs:l().i18n.locales,fallbackLng:l().i18n.defaultLocale})},91463:function(e){"use strict";e.exports={i18n:{defaultLocale:"en",locales:["en","fr","es","sv"]}}},44087:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return tG},default:function(){return tQ}});var n,a,l,i,r,o,c,d,u,p,m=s(85893),y=s(47318),x=s(66692),h=s(35880),f=s(31836),b=s(96445);let g=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t,useGrouping:!0}).format(e)};var j=s(83957),A=s(28126),w=s(67294);let N=()=>{let[e,t]=(0,w.useContext)(j.wP),[s,n]=(0,w.useState)(A.d.NONE),[a,l]=(0,w.useState)(""),[i,r]=(0,w.useState)(""),[o,c]=(0,w.useState)(""),[d,u]=(0,w.useState)(!1);return(0,w.useEffect)(()=>{let{title:t,message:s,type:a,hash:i}=e.alertShower;n(a),r(t),l(s),c(i),a!==A.d.NONE&&u(!0),a===A.d.NONE&&u(!1)},[e.alertShower]),(0,m.jsx)(y.u,{as:w.Fragment,show:d,enter:"transition duration-200 transform ease",enterFrom:"opacity-0 scale-90",enterTo:"opacity-100",leave:"transition duration-200 transform ease",leaveFrom:"opacity-100",leaveTo:"opacity-0 scale-90",children:(0,m.jsx)("div",{className:"max-w-screen fixed bottom-10 drop-shadow-2xl mx-auto z-30",children:(0,m.jsxs)("div",{className:g(s===A.d.INFO?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-blue-100 rounded-lg p-4 mb-4 text-sm text-blue-700":s===A.d.WARNING?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-yellow-100 rounded-lg p-4 mb-4 text-sm text-yellow-700":s===A.d.ERROR?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-red-100 rounded-lg p-4 mb-4 text-sm text-red-700":s===A.d.SUCCESS?"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-green-100 rounded-lg p-4 mb-4 text-sm text-green-700":"flex flex-wrap items-center justify-start space-y-1 md:space-y-0 bg-slate-100 rounded-lg p-4 mb-4 text-sm text-slate-700"),role:"alert",children:[s===A.d.INFO?(0,m.jsx)(x.Z,{className:"h-5 w-5"}):s===A.d.SUCCESS?(0,m.jsx)(h.Z,{className:"h-5 w-5"}):s===A.d.WARNING?(0,m.jsx)(f.Z,{className:"h-5 w-5"}):s===A.d.ERROR?(0,m.jsx)(f.Z,{className:"h-5 w-5"}):s===A.d.LOADING?(0,m.jsx)("div",{className:"h-5 w-5 border-4 border-slate-700 border-t-transparent rounded-full animate-spin"}):"",(0,m.jsxs)("div",{className:"md:ml-2",children:[s!==A.d.LOADING&&(0,m.jsx)("span",{className:"font-medium",children:i})," ",a]}),s===A.d.LOADING&&o&&(0,m.jsx)("a",{className:"font-medium text-slate-800 underline md:ml-auto",href:"https://polygonscan.com/tx/".concat(o),children:"check status"}),s!==A.d.LOADING&&(0,m.jsx)("button",{className:"text-slate-800 hover:text-slate-700 ml-auto",onClick:()=>u(!d),children:(0,m.jsx)(b.Z,{className:"h-6 w-6"})})]})})})};var T=s(69077),k=s(24484);let S=e=>{let{tokenAddress:t,showSymbol:s}=e,{address:n}=(0,T.mA)(),{chain:a}=(0,T.LN)(),{data:l}=(0,T.KQ)({address:n,chainId:(null==a?void 0:a.id)||k.yu.id,token:t});return l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{children:Number(null==l?void 0:l.formatted).toFixed(2)}),s&&(0,m.jsx)("span",{children:null==l?void 0:l.symbol})]}):(0,m.jsx)("div",{className:"animate-pulse",children:(0,m.jsx)("div",{className:"h-4 rounded bg-slate-700"})})};var E=s(49808);(n=o||(o={})).Withdraw="withdraw",n.Deposit="deposit",n.Swap="swap";var C=s(7974),I=s(84034),F=s(60662),D=s(22536),R=s(58033),M=s(78),Z=s(30531),O=s(59175),L=s(93074),_=s(24639);let B=[{coin:Z.sN.RIC,tokenAddress:O.Nw,superTokenAddress:O.cZ,multi:1e6,key:"hasUsdcApprove"},{coin:Z.sN.StIbAlluoUSD,tokenAddress:O.n0,superTokenAddress:O.$v,multi:1e18,key:"hasIbAlluoUSDApprove"},{coin:Z.sN.StIbAlluoETH,tokenAddress:O.$G,superTokenAddress:O.EV,multi:1e18,key:"hasIbAlluoETHApprove"},{coin:Z.sN.StIbAlluoBTC,tokenAddress:O.Mv,superTokenAddress:O.HT,multi:1e18,key:"hasIbAlluoBTCApprove"},{coin:Z.sN.USDC,tokenAddress:O.QA,superTokenAddress:O.V8,multi:1e6,key:"hasUsdcApprove"},{coin:Z.sN.DAI,tokenAddress:O.P0,superTokenAddress:O.ho,multi:1e18,key:"hasDaiApprove"},{coin:Z.sN.WETH,tokenAddress:O.Yw,superTokenAddress:O.gp,multi:1e18,key:"hasWethApprove"},{coin:Z.sN.WBTC,tokenAddress:O.ci,superTokenAddress:O.kE,multi:1e8,key:"hasWbtcApprove"},{coin:Z.sN.MATIC,tokenAddress:O.gU,superTokenAddress:O.s,multi:1e18,key:"hasMaticApprove"}],P=[{coin:Z.sN.FUSDC,tokenAddress:L.E8,superTokenAddress:L.AG,multi:1e6,key:"hasFUsdcApprove"},{coin:Z.sN.FDAI,tokenAddress:L.SQ,superTokenAddress:L.jT,multi:1e18,key:"hasFDaiApprove"}],U=[{coin:Z.sN.OPUSDC,tokenAddress:_.q4,superTokenAddress:_.NR,multi:1e6,key:"hasOpUsdcApprove"},{coin:Z.sN.OPDAI,tokenAddress:_.r,superTokenAddress:_.bE,multi:1e18,key:"hasOpDaiApprove"},{coin:Z.sN.OP,tokenAddress:_.Zx,superTokenAddress:_.oJ,multi:1e18,key:"hasOPApprove"}];var G=s(81689),Q=s(7365);let z=[...O.ow,...L.Jg,..._.L6];var W=s(2593);let V=W.O$.from(0),$=W.O$.from(-1);function K(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pad:!1,commify:!1},n=W.O$.from(e),a=n.lt(V),l=W.O$.from(10).pow(W.O$.from(t));a&&(n=n.mul($));let i=n.mod(l).toString();for(;i.length<t;)i="0".concat(i);if(!s.pad){let r=i.match(/^([0-9]*[1-9]|0)(0*)/);r&&(i=r[1])}let o=n.div(l).toString();s.commify&&(o=o.replace(/\B(?=(\d{3})+(?!\d))/g,","));let c="".concat(o).concat("0"==i?"":".".concat(i));return a&&(c="-".concat(c)),c}let H=e=>{let t={},s=z.map(async t=>{try{let s=await (0,M.a4)({address:t,abi:Q.e,functionName:"balanceOf",args:[e]});return{balance:s,tokenAddress:t}}catch(n){return}});return Promise.all(s).then(e=>(e.map(e=>{e&&(e.tokenAddress===O.ci&&(t[e.tokenAddress]=K(e.balance,8)),(e.tokenAddress===O.QA||e.tokenAddress===L.E8)&&(t[e.tokenAddress]=K(e.balance,6)),t[e.tokenAddress]=K(e.balance,18))}),t))},q=(e,t)=>{let{address:s}=(0,M.D0)();return H(s).then(async n=>{let a=await (0,M.uN)({address:e,abi:M.em}),l=await (0,G.M1)(a,s,t),i=B.find(t=>t.tokenAddress===e),r=i?i.multi:1,o=parseFloat(l)>parseFloat(n&&n[e])*r;return o})},J=[{coin:Z.sN.USDCx,tokenAddress:O.V8},{coin:Z.sN.DAIx,tokenAddress:O.ho},{coin:Z.sN.WETHx,tokenAddress:O.gp},{coin:Z.sN.WBTCx,tokenAddress:O.kE},{coin:Z.sN.MATICx,tokenAddress:O.s},{coin:Z.sN.StIbAlluoETH,tokenAddress:O.EV},{coin:Z.sN.StIbAlluoUSD,tokenAddress:O.$v},{coin:Z.sN.StIbAlluoBTC,tokenAddress:O.HT}],X=[{coin:Z.sN.FDAIx,tokenAddress:L.jT},{coin:Z.sN.FUSDCx,tokenAddress:L.AG}],Y=[{coin:Z.sN.OPUSDCx,tokenAddress:_.NR},{coin:Z.sN.OPDAIx,tokenAddress:_.bE},{coin:Z.sN.OPx,tokenAddress:_.oJ}];var ee=s(61744),et=s(30963);let es=e=>{let{action:t,type:s,form:n,icon:a,loading:l,primary:i,disabled:r,handleClick:o}=e;return(0,m.jsxs)("button",{type:s,form:n,disabled:r,className:g(i?"btn-rounded bg-primary-500 hover:bg-primary-300 disabled:bg-primary-200 disabled:text-slate-500 text-slate-800":"btn-rounded bg-slate-100 hover:bg-slate-300"),onClick:o,children:[l?"":a,l&&!a&&(0,m.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-slate-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,m.jsx)("span",{children:t})]})},en=e=>{let{action:t,type:s,disabled:n,handleClick:a}=e;return(0,m.jsx)("button",{type:s,className:"address-link",disabled:n,onClick:a,children:(0,m.jsx)("span",{children:t})})},ea=e=>{let{action:t,type:s,disabled:n,handleClick:a}=e;return(0,m.jsx)("button",{type:s,className:"btn-pill-outline",disabled:n,onClick:a,children:(0,m.jsx)("span",{children:t})})},el=e=>{let{action:t,type:s,primary:n,disabled:a,loading:l,handleClick:i}=e;return(0,m.jsxs)("button",{type:s,disabled:a,className:g(n?"btn-pill-solid":"btn-pill-solid bg-slate-100 hover:bg-slate-300 disabled:bg-primary-200 disabled:text-slate-500"),onClick:i,children:[l&&(0,m.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-slate-800",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,m.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,m.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,m.jsx)("span",{children:t})]})};var ei=s(25675),er=s.n(ei);let eo=e=>{let{classNames:t,value:s,coins:n,handleChange:a}=e;return(0,m.jsx)(I.R,{value:s,onChange:a,children:(0,m.jsxs)("div",{className:g(t||"relative w-full z-10"),children:[(0,m.jsxs)(I.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,m.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2",children:[s!==Z.sN.SELECT&&(0,m.jsx)("span",{children:(0,m.jsx)(er(),{width:"22",height:"22",src:Z.mk[s],alt:s})}),(0,m.jsx)("span",{className:"block truncate",children:s})]}),(0,m.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,m.jsx)(F.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,m.jsx)(y.u,{as:w.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)(I.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:n.map((e,t)=>(0,m.jsx)(I.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2",children:[e!==Z.sN.SELECT&&(0,m.jsx)("span",{children:(0,m.jsx)(er(),{width:"22",height:"22",src:Z.mk[e],alt:e})}),(0,m.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:e})]}),s?(0,m.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,m.jsx)(D.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null,s?(0,m.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,m.jsx)(D.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})})},ec=["0.02%","0.03%","0.05%"],ed=[...Z.ix,...Z.Qo],eu=e=>{let{type:t,close:s,setClose:n,balanceList:a}=e,{t:l}=(0,C.$G)("home"),{address:i}=(0,T.mA)(),{chain:r}=(0,T.LN)(),[c,d]=(0,w.useContext)(j.wP),[u,p]=(0,w.useState)(!1),[x,h]=(0,w.useState)(),[f,b]=(0,w.useState)(),[g,v]=(0,w.useState)(Z.sN.SELECT),[A,N]=(0,w.useState)(Z.sN.SELECT),[k,S]=(0,w.useState)(Z.sN.SELECT),[E,O]=(0,w.useState)(""),[L,_]=(0,w.useState)(!1),[G,Q]=(0,w.useState)(),[z,W]=(0,w.useState)(""),[V]=et.Z.useLazyUpgradeQuery(),[$]=et.Z.useLazyApproveQuery(),[K]=et.Z.useLazyDowngradeQuery(),[en,ea]=(0,w.useState)(),[el,ei]=(0,w.useState)(),[er,eu]=(0,w.useState)(),[ep,em]=(0,w.useState)();(0,w.useEffect)(()=>{if(r){if(137===r.id){let e=J.map(e=>e.coin),t=B.map(e=>e.coin);ea(e),ei(t),em(B),eu(J)}if(80001===r.id){let s=X.map(e=>e.coin),n=P.map(e=>e.coin);ea(s),ei(n),em(P),eu(X)}if(10===r.id){let a=Y.map(e=>e.coin),l=U.map(e=>e.coin);ea(a),ei(l),em(U),eu(Y)}}},[r]),(0,w.useEffect)(()=>{if(t===o.Withdraw&&g!==Z.sN.SELECT){let e=null==er?void 0:er.find(e=>e.coin===g);b(e)}else if(t===o.Deposit&&g!==Z.sN.SELECT){let s=null==ep?void 0:ep.find(e=>e.coin===g);q(null==s?void 0:s.tokenAddress,null==s?void 0:s.superTokenAddress).then(e=>p(e)),h(s)}},[g]),(0,w.useEffect)(()=>{o.Deposit&&x&&(async()=>{let e=await (0,M.EG)({address:i,chainId:null==r?void 0:r.id,token:null==x?void 0:x.tokenAddress}).then(e=>null==e?void 0:e.formatted);W(e)})()},[x]);let ey=()=>{if(x){_(!0);let e=$({tokenAddress:null==x?void 0:x.tokenAddress,superTokenAddress:null==x?void 0:x.superTokenAddress});e.then(e=>{_(!1),q(null==x?void 0:x.tokenAddress,null==x?void 0:x.superTokenAddress).then(e=>p(e))})}},ex=()=>{o.Withdraw&&a&&O(null==a?void 0:a[null==f?void 0:f.tokenAddress]),o.Deposit&&z&&O(z)},eh=e=>{null==e||e.preventDefault(),g!==Z.sN.SELECT&&(d(R.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),t===o.Withdraw?H(i).then(e=>{if(0>=Number(E)||Object.keys(e).length&&0===Number(e[null==f?void 0:f.tokenAddress]))return;let t=ee.parseEther(E);_(!0);let s=K({value:t.toString(),tokenAddress:null==f?void 0:f.tokenAddress});s.then(e=>{e.isSuccess&&d(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),_(e.isLoading),e.isError&&d(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{d(R.Z.hideAlert())},5e3)}).catch(e=>d(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}):t===o.Deposit&&H(i).then(e=>{if(!(0>Number(E))&&(!Object.keys(e).length||!x||0!==Number(e[x.tokenAddress]))&&u){let t=ee.parseEther(E);_(!0);let s=V({value:t.toString(),tokenAddress:null==x?void 0:x.superTokenAddress});s.then(e=>{e.isSuccess&&d(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),_(e.isLoading),e.isError&&d(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{d(R.Z.hideAlert())},5e3)}).catch(e=>d(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}}))};return(0,m.jsx)("div",{className:"flex flex-col items-start",children:(0,m.jsxs)("form",{onSubmit:eh,className:"flex flex-col items-start w-full space-y-6",children:[(t===o.Withdraw||t===o.Deposit)&&en&&el&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("label",{className:"text-slate-100",children:[l("token-action")," ",l(t),"?"]}),(0,m.jsx)(eo,{value:g,coins:t===o.Withdraw?en:t===o.Deposit?el:[],handleChange:v}),g!==Z.sN.SELECT&&(0,m.jsxs)("p",{children:["Balance:"," ",o.Withdraw&&a&&f?parseFloat(null==a?void 0:a[null==f?void 0:f.tokenAddress]).toFixed(3):o.Deposit&&z&&x?parseFloat(z).toFixed(3):0," ",g]})]}),t===o.Swap&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("label",{className:"text-slate-100",children:[l(t===o.Swap?"tokens-action":"token-action")," ",l(t),"?"]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,m.jsxs)("span",{className:"text-slate-100",children:[l("from"),": "]}),(0,m.jsx)(eo,{classNames:"relative w-full z-30",value:A,coins:ed,handleChange:N})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,m.jsxs)("span",{className:"text-slate-100",children:[l("to"),": "]}),(0,m.jsx)(eo,{classNames:"relative w-full z-20",value:k,coins:ed,handleChange:S})]})]}),(0,m.jsxs)("label",{className:"text-slate-100",children:[l("amount-action")," ",l(t),"?"]}),(0,m.jsxs)("div",{className:"relative w-full",children:[(0,m.jsx)("input",{type:"number",className:"input-outline",value:E,step:"any",onChange:e=>O(e.target.value),placeholder:t===o.Swap?"".concat(l(A!==Z.sN.SELECT?"amount-in":"amount")," ").concat(A!==Z.sN.SELECT?A:""):l("amount")}),(0,m.jsx)("button",{type:"button",className:"pr-8 text-primary-500 hover:text-primary-300 hover:font-bold absolute right-2.5 bottom-2.5 font-medium text-sm",onClick:ex,children:"Max"})]}),t===o.Swap&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("label",{className:"text-slate-100",children:[l("slippage-tolerance"),":"]}),(0,m.jsx)(I.R,{value:G,onChange:Q,children:(0,m.jsxs)("div",{className:"relative w-full z-10",children:[(0,m.jsxs)(I.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,m.jsx)("span",{className:"block truncate",children:G||"Select slippage tolerance"}),(0,m.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,m.jsx)(F.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,m.jsx)(y.u,{as:w.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)(I.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:ec.map((e,t)=>(0,m.jsx)(I.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:e}),s?(0,m.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,m.jsx)(D.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})}),(0,m.jsxs)("p",{className:"text-slate-100",children:[l("min-output-amt"),": ...",k!==Z.sN.SELECT?k:""]})]}),(0,m.jsxs)("div",{className:"flex space-x-4 w-full justify-end",children:[(0,m.jsx)("button",{type:"button",className:"text-slate-100 underline",onClick:()=>n(!s),children:l("cancel")}),(t===o.Withdraw||t===o.Swap)&&(0,m.jsx)(es,{type:"submit",loading:L,disabled:L,action:L?"".concat(l("confirming"),"..."):"".concat(l("confirm")," ").concat(l(t))}),u&&t===o.Deposit&&(0,m.jsx)(es,{type:"submit",loading:L,disabled:L,action:L?"".concat(l("confirming"),"..."):"".concat(l("confirm")," ").concat(l(t))}),!u&&t===o.Deposit&&(0,m.jsx)(es,{type:"button",loading:L,action:L?"".concat(l("approving"),"..."):"".concat(l("approve")),disabled:g===Z.sN.SELECT||L,handleClick:ey})]})]})})},ep=e=>{let{close:t,setClose:s,action:n,balanceList:a}=e,{t:l}=(0,C.$G)("home"),[i,r]=(0,w.useState)(0);return(0,w.useEffect)(()=>{r(n)},[n]),(0,m.jsxs)(E.O.Group,{selectedIndex:i,onChange:r,children:[(0,m.jsxs)(E.O.List,{className:"flex items-center justify-between border-b-2 border-primary-900 border-opacity-30 mb-8 mt-4",children:[(0,m.jsx)(E.O,{as:w.Fragment,children:e=>{let{selected:t}=e;return(0,m.jsx)("button",{className:t?"text-slate-100 border-b-2 border-primary-500":"text-slate-400 border-none",children:l("withdraw")})}}),(0,m.jsx)(E.O,{as:w.Fragment,children:e=>{let{selected:t}=e;return(0,m.jsx)("button",{className:t?"text-slate-100 border-b-2 border-primary-500":"text-slate-400 border-none",children:l("deposit")})}}),(0,m.jsx)("button",{className:"text-slate-400 hover:text-slate-100",onClick:()=>s(!t),children:(0,m.jsx)(b.Z,{className:"h-4 w-4"})})]}),(0,m.jsxs)(E.O.Panels,{children:[(0,m.jsx)(E.O.Panel,{children:(0,m.jsx)(eu,{type:o.Withdraw,close:t,setClose:s,balanceList:a})}),(0,m.jsx)(E.O.Panel,{children:(0,m.jsx)(eu,{type:o.Deposit,close:t,setClose:s,balanceList:a})}),(0,m.jsx)(E.O.Panel,{children:(0,m.jsx)(eu,{type:o.Swap,close:t,setClose:s,balanceList:a})})]})]})},em=new Map([[_.NR,"usd-coin"],[_.bE,"dai"],[L.jT,"dai"],[L.AG,"usd-coin"],[O.ho,"dai"],[O.V8,"usd-coin"],[O.gp,"weth"],[O.kE,"wrapped-bitcoin"],[O.s,"matic-network"],[O.cZ,"richochet"],[O.EV,"weth"],[O.$v,"usd-coin"],[O.HT,"wrapped-bitcoin"],[_.oJ,"optimism"]]);var ey=s(60179);let ex=()=>{let[e]=ey.Z.useLazyGetPricesQuery(),[t,s]=(0,w.useState)(new Map);return(0,w.useEffect)(()=>{let t=[...em.values()],n=e(t.join(","));n.then(e=>{let t=[...em.keys()],n=new Map;t.forEach(t=>{var s,a;let l=null==em?void 0:em.get(t),i=null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.filter(e=>e.id===l);void 0===i?(n.set(t,0),console.warn("Could not fetch price for token ",t)):n.set(t,null===(a=i[0])||void 0===a?void 0:a.current_price)}),s(n)})},[]),t};(a=c||(c={})).ETH="#B3FFFF",a.WBTC="#FF8D8F",a.RIC="#7B7EFF",a.USDC="#2775CA",a.StIbAlluoETH="#75E276",a.StIbAlluoUSD="#E9DF89",a.OP="#ff0000",a.OPx="#ff0000",a.DAI="#d5b608",a.OPDAI="#d5b608",a.OPDAIx="#d5b608";let eh={[Z.sN.ETH]:c.ETH,[Z.sN.WBTC]:c.WBTC,[Z.sN.RIC]:c.RIC,[Z.sN.USDC]:c.USDC,[Z.sN.StIbAlluoUSD]:c.StIbAlluoUSD,[Z.sN.StIbAlluoETH]:c.StIbAlluoETH,[Z.sN.OP]:c.OP,[Z.sN.OPx]:c.OPx,[Z.sN.OPDAI]:c.OPDAI,[Z.sN.DAI]:c.DAI},ef={USDC:"usd-coin",MATIC:"matic-network",ETH:"ethereum",BTC:"bitcoin",WBTC:"wrapped-bitcoin",DAI:"dai",RIC:"richochet",IbAlluoETH:"ethereum",IbAlluoBTC:"wrapped-bitcoin",IbAlluoUSD:"usd-coin",StIbAlluoETH:"ethereum",StIbAlluoBTC:"wrapped-bitcoin",StIbAlluoUSD:"usd-coin",FUSDC:"usd-coin",FDAI:"dai",OP:"optimism"},eb=e=>{let[t]=ey.Z.useLazyGetTokenHistoryQuery(),[s,n]=(0,w.useState)(new Map),a=(0,w.useRef)(!1);return(0,w.useEffect)(()=>{if(e.size>0){let s=new Map;for(let[l,i]of e)if(i[0]!==Z.sN.SELECT&&i[1]!==Z.sN.SELECT){let r=[ef[i[0]],ef[i[1]]],o=r.map(async e=>await t(e));Promise.all(o).then(e=>{e.map(e=>{e&&s.set(null==e?void 0:e.originalArgs,(null==e?void 0:e.data.prices)||"")})}).finally(()=>{n(s),a.current=!0})}}},[e]),(0,w.useEffect)(()=>{a.current&&(a.current=!1)},[a]),s},eg=e=>{let t=[],s=[];return e&&e.length&&(s=[...t=[...e].sort((e,t)=>+e[0]-+t[0])].sort((e,t)=>+e[1]-+t[1])),{tSort:t,priceSorted:s}};var ev=s(67421),ej=s(9253),eA=s(46888),ew=s(3023),eN=s(75358),eT=s(14888),ek=s(86108);let eS=e=>{let{pairs:t,position:s}=e,{t:n}=(0,ev.$G)("home"),a=eb(t),[l,i]=(0,w.useState)([]),[r,o]=(0,w.useState)([]),[c,d]=(0,w.useState)([]),[u,p]=(0,w.useState)(["0","0"]),y=e=>"auto"!==e?new Date(e).toLocaleDateString("en-us",{month:"short",day:"numeric"}):new Date().toLocaleDateString("en-us",{month:"short",day:"numeric"}),x=e=>v(e),h=e=>{let t=e.map(e=>e[0]);d(t)};return(0,w.useEffect)(()=>{if(a.size>0&&t.size>0)for(let[e,s]of t){if(s[0]===Z.sN.USDC||s[0]===Z.sN.IbAlluoUSD||s[0]===Z.sN.StIbAlluoUSD||s[0]===Z.sN.DAI){let{tSort:n,priceSorted:l}=eg(a.get(ef[s[1]]));l.length&&n.length&&(p([l[0][1]||"0",l[l.length-1][1]||"0"]),i(n))}if(s[1]===Z.sN.USDC||s[1]===Z.sN.IbAlluoUSD||s[1]===Z.sN.StIbAlluoUSD||s[1]===Z.sN.DAI){let{tSort:r,priceSorted:o}=eg(a.get(ef[s[0]]));o.length&&r.length&&(p([o[0][1]||"0",o[o.length-1][1]||"0"]),i(r))}}},[a,t]),(0,w.useEffect)(()=>{l&&l.length&&h(l)},[l]),(0,w.useEffect)(()=>{if(l&&l.length&&c.length){let e=[];c.map((t,s)=>{e.push({name:t,price:l[s][1]})}),o(e)}},[c,l]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"h-52 min-h-full w-52 min-w-full",children:(0,m.jsx)(ej.h,{height:"100%",width:"100%",children:(0,m.jsxs)(eA.T,{margin:{top:0,right:10,left:40,bottom:20},data:r,children:[(0,m.jsx)(ew.K,{dataKey:"name",tickFormatter:e=>y(e),interval:"preserveEnd",tickMargin:5,minTickGap:10}),(0,m.jsx)(eN.B,{dataKey:"y",tickMargin:5,orientation:"left",tickFormatter:e=>x(e),interval:"preserveEnd",domain:[u[0],u[1]]}),(0,m.jsx)(eT.u,{}),(0,m.jsx)(ek.u,{type:"monotone",dataKey:"price",stroke:"#81a8ce",fill:"#81a8ce"})]})})}),s&&(0,m.jsxs)("p",{className:"text-slate-100 my-2 pl-14",children:[(0,m.jsxs)("span",{className:"text-slate-400",children:[n("average-buy-price"),":"]})," 1 ",s.coinB," ="," ",((+u[0]+ +u[1])/2).toFixed(3)," ",s.coinA]})]})};var eE=s(73604),eC=s(46208),eI=s(43815);let eF=e=>{let{tokens:t,geckoPriceList:s,balances:n}=e,{t:a}=(0,C.$G)("home"),[l,i]=(0,w.useState)(0),[r,o]=(0,w.useState)([]),[c,d]=(0,w.useState)([]),{chain:u}=(0,T.LN)();return(0,w.useEffect)(()=>{u&&((null==u?void 0:u.id)===80001&&d(P),(null==u?void 0:u.id)===137&&d(B),(null==u?void 0:u.id)===10&&d(U))},[u]),(0,w.useEffect)(()=>{let e=[];t.filter(e=>!!e.color).map(t=>{e.push({name:t.token,color:t.color,value:parseFloat(t.ricAmount)})}),o(e)},[t]),(0,w.useEffect)(()=>{let e=c.reduce((e,t)=>{let a=Object.keys(n).length&&Object.keys(s).length&&Object.keys(ef).length&&(parseFloat(n[t.superTokenAddress])*parseFloat(s[ef[t.coin]].usd)).toFixed(6);return e+parseFloat(a)},0);i(e)},[t,n,s,ef]),(0,m.jsx)("div",{className:"h-52 w-52",children:(0,m.jsx)(ej.h,{height:"100%",width:"100%",children:(0,m.jsxs)(eE.u,{children:[(0,m.jsx)("text",{fill:"#81a8ce",x:100,y:80,textAnchor:"middle",dominantBaseline:"middle",children:a("total")}),l&&(0,m.jsx)("text",{fill:"white",x:100,y:110,fontWeight:600,textAnchor:"middle",dominantBaseline:"middle",children:v(l)}),(0,m.jsx)(eC.b,{data:r,innerRadius:80,outerRadius:100,fill:"#81a8ce",paddingAngle:0,nameKey:"name",dataKey:"value",children:r.map(e=>(0,m.jsx)(eI.b,{fill:e.color},"cell-".concat(e.name)))})]})})})};var eD=s(45485),eR=s(44414);let eM=e=>{let{contentPerPage:t=0,count:s=0}=e,[n,a]=(0,w.useState)(1),[l,i]=(0,w.useState)({before:!1,paginationGroup:[],after:!0}),r=Math.ceil(s/t),o=n*t,[c,d]=(0,w.useState)([]);(0,w.useEffect)(()=>{if(r>2){let e=Array(r-2).fill(1).map((e,t)=>t+2);d(e)}},[r]),(0,w.useEffect)(()=>{let e=c.indexOf(n),t=[],s=!1,a=!1;t=1===n?c.slice(0,3):n===r||n===r-1||n===r-2?c.slice(-3,r):2===n?c.slice(e,e+3):[n-1,n,n+1],r<=5?(s=!1,a=!1):(s=!1,a=!1,t[0]>2&&(s=!0),t[2]<r-1&&(a=!0)),i({paginationGroup:t,before:s,after:a})},[n,c,r]);let u=e=>{a(t=>e?t===r?t:t+1:1===t?t:t-1)},p=e=>{e>r?a(r):e<1?a(1):a(e)};return{totalPages:r,nextPage:()=>u(!0),prevPage:()=>u(!1),setPage:p,firstContentIndex:o-t,lastContentIndex:o,page:n,gaps:l}};var eZ=s(84009);(l=d||(d={})).Position="Position",l.Market="Market",l.Balances="Balances",l.ViewPosition="View Position";let eO=e=>{let{coinA:t,coinB:s,token:n,type:a}=e;return(a===d.Market||a===d.Position)&&t&&s?(0,m.jsxs)("div",{className:"flex flex-wrap items-center justify-between lg:space-x-2",children:[(0,m.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,m.jsx)(er(),{width:"24",height:"24",src:Z.mk[t],alt:t})," ",(0,m.jsx)("span",{className:"text-sm",children:t})]}),(0,m.jsx)(eZ.Z,{className:"h-5 w-5"}),(0,m.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,m.jsx)(er(),{width:"24",height:"24",src:Z.mk[s],alt:s})," ",(0,m.jsx)("span",{className:"text-sm",children:s})]})]}):a===d.Balances&&n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(er(),{width:"24",height:"24",src:Z.mk[n],alt:n}),(0,m.jsx)("span",{className:g(n===Z.sN.ETH?"bg-eth text-slate-800 px-1 py-0":n===Z.sN.WBTC?"bg-btc text-slate-800 px-1 py-0":n===Z.sN.RIC?"bg-ric text-slate-200 px-1 py-0":n===Z.sN.USDC?"bg-usdc text-slate-200 px-1 py-0":n===Z.sN.StIbAlluoETH?"bg-stIbAlluoEth text-slate-800 px-1 py-0":n===Z.sN.StIbAlluoUSD?"bg-stIbAlluoUsd text-slate-800 px-1 py-0":"bg-transparent","text-sm"),children:n})]}):a===d.ViewPosition&&t&&s?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,m.jsx)(er(),{width:"40",height:"40",src:Z.mk[t],alt:t})," ",(0,m.jsx)("span",{className:"font-medium text-slate-100",children:t})]}),(0,m.jsx)(eZ.Z,{className:"h-10 w-16"}),(0,m.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,m.jsx)(er(),{width:"30",height:"30",src:Z.mk[s],alt:s})," ",(0,m.jsx)("span",{className:"font-medium text-slate-100",children:s})]})]}):(0,m.jsx)(m.Fragment,{})},eL=e=>{let{headers:t,rowNumber:s}=e,n=[],a=[];for(let l=0;l<t.length;l++)a.push((0,m.jsx)("td",{className:"h-4 bg-slate-700"},l));for(let i=0;i<s;i++)n.push((0,m.jsx)("tr",{className:"animate-pulse",children:a},i));return(0,m.jsxs)("table",{className:"border-separate border-spacing-2 min-w-full",children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:t.map((e,t)=>(0,m.jsx)("th",{scope:"col",className:"font-normal text-slate-400 px-6 py-4 text-start",children:e},t))})}),(0,m.jsx)("tbody",{children:n})]})},e_=e=>!!e.positions||0===e.positions,eB=e=>!!e.streams||0===e.streams,eP=e=>!!e.token,eU=e=>{let{headers:t,rowData:s,selectable:n,selectData:a,tableLoaderRows:l}=e,{t:i}=(0,C.$G)("home"),{firstContentIndex:r,lastContentIndex:o,nextPage:c,prevPage:u,page:p,gaps:y,setPage:x,totalPages:h}=eM({contentPerPage:6,count:s.length});return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"overflow-auto",children:[0===s.length&&(0,m.jsx)(eL,{headers:t,rowNumber:l}),s.length>0&&(0,m.jsxs)("table",{className:"table-fixed min-w-full",children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:t.map((e,t)=>(0,m.jsx)("th",{scope:"col",className:"font-normal text-slate-400 px-6 py-4 text-start",children:i("".concat(e.toLocaleLowerCase().replace(/\s/g,"-")))},t))})}),(0,m.jsx)("tbody",{children:s.slice(r,o).map((e,t)=>{var s,l;return(0,m.jsx)("tr",{className:g(n?"cursor-pointer":"cursor-auto","text-slate-200 border-b border-slate-600"),onClick:()=>n&&e_(e)?null==a?void 0:a(e):null,children:e_(e)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"px-2 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,m.jsx)(eO,{coinA:e.coinA,coinB:e.coinB,type:d.Position})})}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,m.jsx)("p",{children:v(parseFloat(e.rateUsdValue))}),(0,m.jsxs)("p",{className:"text-slate-400",children:[parseFloat(e.output).toFixed(3)," ",(0,m.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,m.jsx)("p",{children:v(parseFloat(e.input.toFixed(3)))}),(0,m.jsxs)("p",{className:"text-slate-400",children:[e.input.toFixed(3)," ",(0,m.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]})]}):eB(e)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"px-2 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"inline-flex items-center gap-2",children:(0,m.jsx)(eO,{coinA:e.coinA,coinB:e.coinB,type:d.Market})})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.feePercent}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,m.jsx)("p",{children:v(parseFloat(e.usdValue))}),(0,m.jsxs)("p",{className:"text-slate-400",children:[e.total," ",(0,m.jsxs)("span",{className:"text-sm",children:[e.coinA,"x"]})]})]}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.streams})]}):eP(e)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("td",{className:"flex items-center px-2 py-4 whitespace-nowrap space-x-2",children:(0,m.jsx)(eO,{token:e.token,type:d.Balances})}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,m.jsx)("p",{children:e.token===Z.sN.WBTC||e.token===Z.sN.IbAlluoBTC||e.token===Z.sN.StIbAlluoBTC||e.token===Z.sN.ETH||e.token===Z.sN.IbAlluoETH||e.token===Z.sN.StIbAlluoETH?null===(s=parseFloat(e.ricAmount).toFixed(20).match(/^-?\d*\.?0*\d{0,2}/))||void 0===s?void 0:s[0].replace(/(?:\.0+|(\.\d+?)0+)$/,"$1"):parseFloat(e.ricAmount).toFixed(2)}),(0,m.jsx)("p",{className:"text-slate-400",children:v(parseFloat(e.ricUsdAmount))})]}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,m.jsx)("p",{children:"N/A"===e.walletAmount?e.walletAmount:e.token===Z.sN.WBTC||e.token===Z.sN.IbAlluoBTC||e.token===Z.sN.StIbAlluoBTC||e.token===Z.sN.ETH||e.token===Z.sN.IbAlluoETH||e.token===Z.sN.StIbAlluoETH?null===(l=parseFloat(e.walletAmount).toFixed(20).match(/^-?\d*\.?0*\d{0,2}/))||void 0===l?void 0:l[0].replace(/(?:\.0+|(\.\d+?)0+)$/,"$1"):parseFloat(e.walletAmount).toFixed(2)}),(0,m.jsx)("p",{className:"text-slate-400",children:"N/A"===e.walletUsdAmount?e.walletUsdAmount:v(parseFloat(e.walletUsdAmount))})]})]}):(0,m.jsx)(m.Fragment,{})},t)})})]})]}),s.length>0&&(0,m.jsxs)("div",{className:"flex justify-end text-slate-500 space-x-2 mt-4",children:[(0,m.jsx)("button",{onClick:u,className:"".concat(1!==p&&"hover:text-slate-300"," ").concat(1===p&&"text-slate-600"),disabled:1===p,children:(0,m.jsx)(eD.Z,{className:"h-4 w-4"})}),(0,m.jsx)("button",{onClick:()=>x(1),className:"".concat(1===p&&"text-slate-100"),children:"1"}),y.before?"...":"",y.paginationGroup.map(e=>(0,m.jsx)("button",{onClick:()=>x(e),className:"".concat(p===e?"text-slate-100":""),children:e},e)),y.after?"...":"",h>1&&(0,m.jsx)("button",{onClick:()=>x(h),className:"".concat(p===h&&"text-slate-100"),children:h}),(0,m.jsx)("button",{onClick:c,className:"".concat(p!==h&&"hover:text-slate-300"," ").concat(p===h&&"text-slate-600"),disabled:p===h,children:(0,m.jsx)(eR.Z,{className:"h-4 w-4"})})]})]})},eG=["token","ricochet-balance","wallet-balance"],eQ=e=>{let{tokens:t,balances:s}=e,{t:n}=(0,C.$G)("home"),{address:a,isConnected:l}=(0,T.mA)(),{chain:i}=(0,T.LN)(),[r,o]=(0,w.useState)(0),[c,d]=(0,w.useState)(!0),u=ex(),[p,y]=(0,w.useState)(),[x,h]=(0,w.useState)({}),[f,b]=(0,w.useState)([]);return(0,w.useEffect)(()=>{y([]),i&&((null==i?void 0:i.id)===80001&&y(P),(null==i?void 0:i.id)===137&&y(B),(null==i?void 0:i.id)===10&&y(U))},[null==i?void 0:i.id,s]),(0,w.useEffect)(()=>{l&&(null==i?void 0:i.id)&&(t&&h(t),(async()=>{Object.keys(x).length&&Object.keys(s).length&&await Promise.all(p.map(async e=>{if(!a)return;let t=await (0,M.EG)({address:a,chainId:i.id,token:e.coin!==Z.sN.RIC&&e.coin!==Z.sN.OpRIC?e.tokenAddress:void 0});return{token:e.coin,ricAmount:s[e.superTokenAddress],ricUsdAmount:(parseFloat(s[e.superTokenAddress])*u.get(e.superTokenAddress)).toFixed(2),walletAmount:e.coin===Z.sN.RIC?"N/A":null==t?void 0:t.formatted,walletUsdAmount:e.coin===Z.sN.RIC?"N/A":(parseFloat(null==t?void 0:t.formatted)*u.get(e.superTokenAddress)).toFixed(2),color:eh[e.coin]}})).then(e=>{let t=e.sort((e,t)=>parseFloat(t.ricAmount)-parseFloat(e.ricAmount));t.length>0&&b(t)})})())},[l,t,s,x,p]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"font-light uppercase tracking-widest text-primary-500",children:n("your-balances")}),!c&&s&&(0,m.jsx)(ep,{close:c,setClose:d,action:r,balanceList:s}),c&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex flex-wrap items-center justify-evenly basis-1/3 my-4",children:[(0,m.jsx)(ea,{type:"button",action:"".concat(n("withdraw")),handleClick:()=>{d(!1),o(0)}}),(0,m.jsx)(el,{type:"button",action:"".concat(n("deposit")),primary:!0,handleClick:()=>{d(!1),o(1)}})]}),(0,m.jsx)("div",{className:"flex justify-center my-4",children:(0,m.jsx)(eF,{tokens:f,geckoPriceList:x,balances:s})}),f&&(0,m.jsx)(eU,{headers:eG,rowData:f,tableLoaderRows:6})]})]})};var ez={src:"/_next/static/media/launchpad-bg.d3b0fdae.jpg",height:2722,width:4096,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAABP/aAAwDAQACEAMQAAAAnQQv/8QAGxABAAEFAQAAAAAAAAAAAAAAAQIAAwQREiH/2gAIAQEAAT8AhcI4sjgV83X/xAAaEQEAAQUAAAAAAAAAAAAAAAACAQADERIx/9oACAECAQE/ALjS1zPDFf/EABYRAAMAAAAAAAAAAAAAAAAAAAABIf/aAAgBAwEBPwBQ/9k=",blurWidth:8,blurHeight:5};let eW=e=>{let{content:t}=e;return(0,m.jsx)("div",{className:"card",children:t})},eV=e=>{let{content:t}=e;return(0,m.jsx)("div",{className:"card-outline text-center",children:t})},e$=e=>{let{content:t}=e;return(0,m.jsxs)("div",{className:"card text-center relative",children:[(0,m.jsx)("div",{className:"z-10",children:t}),(0,m.jsx)(er(),{src:ez,className:"object-cover object-bottom absolute inset-0 z-0 rounded-lg",draggable:"false",fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",alt:"Launchpad Background",priority:!0}),(0,m.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-700 via-slate-800 to-slate-900 z-0 opacity-60 rounded-lg"})]})},eK=e=>{let{content:t}=e;return(0,m.jsx)("div",{className:"card-container",children:t})},eH=e=>{let{content:t}=e;return(0,m.jsx)("div",{className:"flex flex-wrap items-center justify-between space-y-4 md:space-y-0 mb-10",children:t})},eq=e=>{let{content:t}=e;return(0,m.jsxs)("div",{className:"card-sm",children:[!t&&(0,m.jsx)("div",{className:"animate-pulse",children:(0,m.jsxs)("div",{className:"grid grid-rows-2 gap-2",children:[(0,m.jsx)("div",{className:"h-5 bg-slate-700 rounded"}),(0,m.jsx)("div",{className:"h-6 bg-slate-700 rounded"})]})}),!!t&&t]})},eJ=e=>(0,m.jsxs)("svg",{viewBox:"0 0 50 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,m.jsx)("path",{d:"M37.918 0h-23.78c0-.043 5.913 4.585 5.913 4.585L0 12.083l20.266 7.669-5.87 4.756 23.522-.343A12.068 12.068 0 0 0 50 12.083C50 5.399 43.359-.043 37.918 0Zm0 21.508c-5.227 0-9.426-4.241-9.426-9.425 0-5.185 4.241-9.426 9.426-9.426 5.184 0 9.426 4.241 9.426 9.426 0 5.184-4.242 9.425-9.426 9.425Z",fill:"#fff"}),(0,m.jsx)("path",{d:"M35.947 18.038h-2.185v-6.684s2.185.129 2.185 1.414v5.27ZM33.89 4.842h5.313c1.5 0 4.242.514 4.242 4.113s-3.514 3.813-3.514 3.813l3.342 5.27h-2.185l-2.87-4.542v-2.142s3.17.471 3.17-2.485-2.185-2.185-2.185-2.185l-4.113-.129s-1.114-.3-1.114-1.67l-.086-.043Z",fill:"#fff"})]}),eX=()=>{let{t:e}=(0,C.$G)("footer");return(0,m.jsxs)("div",{className:"flex flex-wrap items-start justify-between bg-footer-500 p-16",children:[(0,m.jsxs)("h6",{className:"flex space-x-2 mb-10 md:mb-0",children:[(0,m.jsx)(eJ,{width:"50",height:"25"}),(0,m.jsx)("span",{className:"text-slate-100 font-semibold tracking-wide",children:"Ricochet"})]}),(0,m.jsxs)("section",{className:"flex flex-wrap items-center space-x-8 md:space-x-14 lg:space-x-32",children:[(0,m.jsxs)("article",{className:"flex flex-col space-y-4",children:[(0,m.jsx)("h6",{className:"text-slate-600 font-bold",children:e("support")}),(0,m.jsx)("a",{href:"https://discord.gg/ptqCBnJ9dr",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("discord")}),(0,m.jsx)("a",{href:"https://docs.ricochet.exchange/tutorial/using-the-dapp",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("tutorials")}),(0,m.jsx)("a",{href:"https://docs.ricochet.exchange/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("documentation")})]}),(0,m.jsxs)("article",{className:"flex flex-col space-y-4",children:[(0,m.jsx)("h6",{className:"text-slate-600 font-bold",children:e("explore")}),(0,m.jsx)("a",{href:"https://medium.com/ricochet-exchange",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("medium")}),(0,m.jsx)("a",{href:"https://github.com/Ricochet-Exchange/",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("github")}),(0,m.jsx)("a",{href:"https://twitter.com/ricochetxchange",target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 underline",children:e("twitter")})]})]})]})};var eY=s(62367),e0=s(13012),e1=s(56466);let e2=()=>{let{t:e}=(0,C.$G)("home"),[t,s]=(0,w.useContext)(j.wP),{isConnected:n}=(0,T.mA)(),{chain:a}=(0,T.LN)(),[l,i]=(0,w.useState)(!1),[r,o]=(0,w.useState)(e1.YK[0]),[c,d]=(0,w.useState)(1e3),[u]=et.Z.useLazyStartStreamQuery(),p=()=>{let e="https://app.uniswap.org/#/swap?theme=dark&inputCurrency=".concat(O.QA,"&outputCurrency=").concat(O.cZ,"&exactAmount=100000&exactField=output");window.open(e,"_blank")};(0,w.useEffect)(()=>{a&&(80001===a.id&&o(e1.nh[0]),10===a.id&&o(e1.kO[0]))},[a]);let y=()=>{if(!r||!c){s(R.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{s(R.Z.hideAlert())},5e3);return}if(i(!0),s(R.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!c)return;let e="20";if((null==r?void 0:r.type)===e1.Z6.launchpad){let t=new e0.Z(e),n=t.div(2592e3).times(1e18).div(c).round(0,0).times(c).div(1e18).times(259200).div(3600).div(24).div(30).times(10);e=n.toFixed()}let a=u({amount:e,config:r});a.then(e=>{e.isSuccess&&s(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),i(e.isLoading),e.isError&&s(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{s(R.Z.hideAlert())},5e3)}).catch(e=>s(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))};return(0,m.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center text-slate-100 space-x-3",children:[(0,m.jsx)(eY.Z,{className:"h-6 w-6"}),(0,m.jsx)("p",{className:"uppercase tracking-widest",children:"Rexpro"})]}),(0,m.jsx)("p",{className:"text-slate-100",children:e("start-a-position")}),n&&(0,m.jsx)(el,{type:"button",primary:!0,loading:l,disabled:l,action:l?"".concat(e("confirming"),"..."):e("start-20-position"),handleClick:y}),(0,m.jsx)(el,{type:"button",primary:!1,action:"".concat(e("buy")," 100,000 RIC"),handleClick:p})]})};var e4=s(89396);let e5=function(e,t,s){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(s.size>0&&t.size>0?parseFloat(null===(n=t.get(e.flowKey))||void 0===n?void 0:n.flowsOwned)*s.get(e.tokenA):0).toFixed(a)},e3=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(parseFloat(e)*t).toFixed(s)},e6=["market","fee percent","total value streaming","currently streaming"],e8=e=>{let{coingeckoPrices:t,sortedList:s,queries:n}=e,{t:a}=(0,C.$G)("home"),[l,i]=(0,w.useState)(""),[r,o]=(0,w.useState)([]),[c,d]=(0,w.useState)([]),{chain:u}=(0,T.LN)();(0,w.useEffect)(()=>{if(s.length>0&&n.size>0){let e=[];s.map(s=>{var a,l;return e.push({...s,total:parseFloat(null===(a=n.get(s.flowKey))||void 0===a?void 0:a.flowsOwned)||0,usdValue:e5(s,n,t),feePercent:s.coinA.includes("IbAlluo")?"0.5%":"2%",streams:(null===(l=n.get(s.flowKey))||void 0===l?void 0:l.totalFlows)||0})});let a=e.sort((e,t)=>t.total-e.total);o(a)}},[n,t,s]);let p=e=>{let{value:t}=e.target;i(t),r.filter(e=>e.coinA.toUpperCase().includes(t.toUpperCase())||e.coinB.toUpperCase().includes(t.toUpperCase()))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eH,{content:(0,m.jsxs)("div",{className:"w-full flex flex-wrap items-center justify-between space-y-4 lg:space-y-0",children:[(0,m.jsx)("p",{className:"text-slate-400 uppercase",children:a("markets")}),(0,m.jsxs)("label",{className:"relative block w-max",children:[(0,m.jsx)("span",{className:"sr-only",children:"Search"}),(0,m.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:(0,m.jsx)(e4.Z,{className:"h-4 w-4 fill-slate-400",viewBox:"0 0 20 20"})}),(0,m.jsx)("input",{className:"input-search",placeholder:a("search"),type:"text",name:"search",value:l,onChange:p})]})]})}),u&&(0,m.jsx)(eU,{headers:e6,rowData:l?c:r,tableLoaderRows:12})]})};var e7=s(6512),e9=s(44149),te=s(82847),tt=s(47145);let ts=e=>(0,m.jsxs)("svg",{viewBox:"0 0 66 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,m.jsx)("path",{d:"M50.051 0H18.663c0-.056 7.805 6.052 7.805 6.052L0 15.949l26.75 10.123-7.747 6.278 31.048-.452C58.874 31.898 66 24.772 66 15.949S57.234-.056 50.051 0Zm0 28.391c-6.9 0-12.442-5.599-12.442-12.442s5.6-12.442 12.442-12.442c6.844 0 12.443 5.599 12.443 12.442s-5.6 12.442-12.443 12.442Z",fill:"url(#a)"}),(0,m.jsx)("path",{d:"M47.45 23.81h-2.885v-8.822s2.885.17 2.885 1.866v6.956ZM44.735 6.391h7.013c1.98 0 5.599.679 5.599 5.43 0 4.75-4.638 5.033-4.638 5.033l4.412 6.956h-2.885l-3.789-5.995v-2.828s4.185.623 4.185-3.28c0-3.902-2.884-2.884-2.884-2.884l-5.43-.17s-1.47-.396-1.47-2.205l-.113-.057Z",fill:"#C5C2C6"}),(0,m.jsx)("defs",{children:(0,m.jsxs)("linearGradient",{id:"a",x1:0,y1:16.175,x2:66,y2:16.175,gradientUnits:"userSpaceOnUse",children:[(0,m.jsx)("stop",{stopColor:"#6194C3"}),(0,m.jsx)("stop",{offset:1,stopColor:"#B5CBE2"})]})})]});var tn=s(11163),ta=s.n(tn),tl=s(91463),ti=s.n(tl),tr=s(41664),to=s.n(tr),tc=s(23857);let td=e=>{let{locale:t,...s}=e,n=(0,tn.useRouter)(),a=s.href||n.asPath,l=n.pathname;return Object.keys(n.query).forEach(e=>{if("locale"===e){l=l.replace("[".concat(e,"]"),t);return}l=l.replace("[".concat(e,"]"),n.query[e])}),t&&(a=s.href?"/".concat(t).concat(s.href):l),(0,m.jsx)(to(),{className:"text-sm text-slate-200",href:a,onClick:()=>{var e;return null===(e=tc.Z.cache)||void 0===e?void 0:e.call(tc.Z,t)},children:t})},tu=e=>{let{children:t,skipLocaleHandling:s,...n}=e,a=(0,tn.useRouter)(),l=n.locale||a.query.locale||"",i=n.href||a.asPath;return 0===i.indexOf("http")&&(s=!0),l&&!s&&(i=i?"/".concat(l).concat(i):a.pathname.replace("[locale]",l)),(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(to(),{href:i,...n,children:t})})};function tp(){let{disconnect:e}=(0,T.qL)(),{address:t,isConnected:s}=(0,T.mA)(),{data:n,isError:a,isLoading:l}=(0,T.KQ)({address:t,chainId:k.yu.id,token:O.cZ}),{t:i}=(0,C.$G)("home"),r=ta().query.locale||ti().i18n.defaultLocale;return(0,m.jsx)(e7.p,{as:"nav",className:"navbar",children:t=>{let{open:o}=t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(tu,{href:"/",className:"p-2 mr-4 inline-flex items-center space-x-2",draggable:!1,children:[(0,m.jsx)(ts,{width:"50",height:"25"}),(0,m.jsx)("span",{className:"text-xl tracking-wide",children:"Ricochet"})]}),(0,m.jsx)("p",{className:"inline-flex items-center space-x-2",children:ti().i18n.locales.map(e=>e===r?null:(0,m.jsx)(td,{locale:e},e))}),(0,m.jsxs)(e7.p.Button,{className:"btn-mobile-menu",children:[(0,m.jsx)("span",{className:"sr-only",children:"Open main menu"}),o?(0,m.jsx)(b.Z,{className:"h-6 w-6","aria-hidden":"true"}):(0,m.jsx)(e9.Z,{className:"h-6 w-6","aria-hidden":"true"})]}),(0,m.jsx)(e7.p.Panel,{className:"w-full lg:inline-flex lg:flex-grow lg:w-auto",children:(0,m.jsxs)("div",{className:"mobile-links",children:[(0,m.jsxs)("a",{className:"inline-flex items-center space-x-1 text-primary-500",href:"https://discord.com/channels/862796510604296263/864667072357597185",target:"_blank",rel:"noopener noreferrer",children:[(0,m.jsx)("span",{className:"underline",children:"support"}),(0,m.jsx)(te.Z,{className:"h-4 w-4"})]}),l&&(0,m.jsx)("p",{children:"Fetching balance..."}),a&&(0,m.jsx)(m.Fragment,{}),!l&&!a&&s&&(0,m.jsxs)("p",{children:[Number(null==n?void 0:n.formatted).toFixed(2)," ",null==n?void 0:n.symbol]}),(0,m.jsx)(tt.x3.Custom,{children:e=>{let{isConnected:t,show:s,unsupported:n,truncatedAddress:a,ensName:l}=e;return(0,m.jsx)(m.Fragment,{children:t?n?(0,m.jsx)(es,{action:"".concat(i("wrong-network")),handleClick:s,type:"button"}):(0,m.jsx)("button",{type:"button",className:"address-link",children:null!=l?l:a}):(0,m.jsx)(es,{action:"".concat(i("connect-wallet")),handleClick:s,type:"button"})})}}),s&&(0,m.jsxs)("div",{className:"mt-3 space-y-1 px-2",children:[(0,m.jsx)(e7.p.Button,{as:"a",href:"https://staging.ricochet.exchange/#/recent-activity",rel:"noreferrer",target:"_blank",className:"block rounded-md px-3 py-2 text-base font-medium text-slate-400 hover:bg-slate-700 hover:text-slate-100 cursor-pointer",children:i("your-activity")}),(0,m.jsx)(e7.p.Button,{as:"a",onClick:()=>e(),className:"block rounded-md px-3 py-2 text-base font-medium text-slate-400 hover:bg-slate-700 hover:text-slate-100 cursor-pointer",children:i("disconnect-wallet")})]})]})}),(0,m.jsxs)("div",{className:"desktop-links",children:[(0,m.jsxs)("a",{className:"inline-flex items-center space-x-1 text-primary-500",href:"https://discord.com/channels/862796510604296263/864667072357597185",target:"_blank",rel:"noopener noreferrer",children:[(0,m.jsx)("span",{className:"underline",children:i("support")}),(0,m.jsx)(te.Z,{className:"h-4 w-4"})]}),l&&(0,m.jsx)("p",{children:"Fetching balance..."}),a&&(0,m.jsx)(m.Fragment,{}),!l&&!a&&s&&(0,m.jsxs)("p",{children:[Number(null==n?void 0:n.formatted).toFixed(2)," ",null==n?void 0:n.symbol]}),(0,m.jsx)(tt.x3.Custom,{children:e=>{let{isConnected:t,show:s,unsupported:n,truncatedAddress:a,ensName:l}=e;return(0,m.jsx)(m.Fragment,{children:t?n?(0,m.jsx)(es,{action:"".concat(i("wrong-network")),handleClick:s,type:"button"}):(0,m.jsx)(en,{action:null!=l?l:a,handleClick:s,type:"button"}):(0,m.jsx)(es,{action:"".concat(i("connect-wallet")),handleClick:s,type:"button"})})}})]})]})}})}let tm=[{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"contract ISuperfluid",name:"_host",type:"address"},{internalType:"contract IConstantFlowAgreementV1",name:"_cfa",type:"address"},{internalType:"contract IInstantDistributionAgreementV1",name:"_ida",type:"address"},{internalType:"string",name:"_registrationKey",type:"string"},{internalType:"contract IREXReferral",name:"_rexReferral",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feeCollected",type:"uint256"},{indexed:!1,internalType:"address",name:"token",type:"address"}],name:"Distribution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"contract ISuperToken",name:"_token",type:"address"},{internalType:"uint128",name:"_feeRate",type:"uint128"},{internalType:"uint256",name:"_emissionRate",type:"uint256"},{internalType:"uint256",name:"_requestId",type:"uint256"},{internalType:"uint128",name:"_shareScaler",type:"uint128"}],name:"addOutputPool",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementCreated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_cbdata",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementTerminated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_cbdata",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"afterAgreementUpdated",outputs:[{internalType:"bytes",name:"_newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementCreated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"",type:"bytes"}],name:"beforeAgreementTerminated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_superToken",type:"address"},{internalType:"address",name:"_agreementClass",type:"address"},{internalType:"bytes32",name:"",type:"bytes32"},{internalType:"bytes",name:"_agreementData",type:"bytes"},{internalType:"bytes",name:"_ctx",type:"bytes"}],name:"beforeAgreementUpdated",outputs:[{internalType:"bytes",name:"_cbdata",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"ctx",type:"bytes"}],name:"distribute",outputs:[{internalType:"bytes",name:"newCtx",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"streamer",type:"address"}],name:"emergencyCloseStream",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"emergencyDrain",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_requestId",type:"uint256"}],name:"getCurrentValue",outputs:[{internalType:"bool",name:"_ifRetrieve",type:"bool"},{internalType:"uint256",name:"_value",type:"uint256"},{internalType:"uint256",name:"_timestampRetrieved",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getEmissionRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getFeeRate",outputs:[{internalType:"uint128",name:"",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"address",name:"_streamer",type:"address"}],name:"getIDAShares",outputs:[{internalType:"bool",name:"_exist",type:"bool"},{internalType:"bool",name:"_approved",type:"bool"},{internalType:"uint128",name:"_units",type:"uint128"},{internalType:"uint256",name:"_pendingDistribution",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getInputToken",outputs:[{internalType:"contract ISuperToken",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getLastDistributionAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"token",type:"address"}],name:"getOracleInfo",outputs:[{components:[{internalType:"uint256",name:"requestId",type:"uint256"},{internalType:"uint256",name:"usdPrice",type:"uint256"},{internalType:"uint256",name:"lastUpdatedAt",type:"uint256"}],internalType:"struct REXMarket.OracleInfo",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"}],name:"getOutputPool",outputs:[{components:[{internalType:"contract ISuperToken",name:"token",type:"address"},{internalType:"uint128",name:"feeRate",type:"uint128"},{internalType:"uint256",name:"emissionRate",type:"uint256"},{internalType:"uint128",name:"shareScaler",type:"uint128"}],internalType:"struct REXMarket.OutputPool",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRateTolerance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_streamer",type:"address"},{internalType:"contract ISuperToken",name:"_token",type:"address"}],name:"getStreamRate",outputs:[{internalType:"int96",name:"_requesterFlowRate",type:"int96"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTellorOracle",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalInflow",outputs:[{internalType:"int96",name:"",type:"int96"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_inputToken",type:"address"},{internalType:"uint256",name:"_rateTolerance",type:"uint256"},{internalType:"contract ITellor",name:"_tellor",type:"address"},{internalType:"uint256",name:"_inputTokenRequestId",type:"uint256"},{internalType:"uint128",name:"_affiliateFee",type:"uint128"},{internalType:"uint128",name:"_feeRate",type:"uint128"}],name:"initializeMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_emissionRate",type:"uint256"}],name:"initializeSubsidies",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_inputTokenA",type:"address"},{internalType:"uint256",name:"_inputTokenARequestId",type:"uint256"},{internalType:"uint128",name:"_inputTokenAShareScaler",type:"uint128"},{internalType:"contract ISuperToken",name:"_inputTokenB",type:"address"},{internalType:"uint256",name:"_inputTokenBRequestId",type:"uint256"},{internalType:"uint128",name:"_inputTokenBShareScaler",type:"uint128"},{internalType:"uint128",name:"_feeRate",type:"uint128"},{internalType:"uint256",name:"_rateTolerance",type:"uint256"}],name:"initializeTwoWayMarket",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"isAppJailed",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"ric",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"uint128",name:"_emissionRate",type:"uint128"}],name:"setEmissionRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_index",type:"uint32"},{internalType:"uint128",name:"_feeRate",type:"uint128"}],name:"setFeeRate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_rate",type:"uint256"}],name:"setRateTolerance",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ISuperToken",name:"_token",type:"address"}],name:"updateTokenPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"updateTokenPrices",outputs:[],stateMutability:"nonpayable",type:"function"}],ty=e=>O.ql[e],tx=async(e,t,s,n)=>{if(80001===n||10===n)return 1e4;let{outputIndex:a}=e1.zJ.filter(e=>e.input===t&&e.output===s)[0],l=await (0,M.a4)({address:ty(e),abi:tm,functionName:"getOutputPool",args:[a]}),i=(null==l?void 0:l.shareScaler)*1e3;return i};(i=u||(u={})).none="",i.change="change",i.deposit="deposit";let th=e=>{let{setClose:t,position:s}=e,{t:n}=(0,C.$G)("home"),{address:a}=(0,T.mA)(),{chain:l}=(0,T.LN)(),[i,r]=(0,w.useState)(),[o,c]=(0,w.useState)(u.none),[d,p]=(0,w.useState)(""),[y,x]=(0,w.useState)(""),[h,f]=(0,w.useContext)(j.wP),[b]=et.Z.useLazyStartStreamQuery(),[g]=et.Z.useLazyStopStreamQuery(),[v,A]=(0,w.useState)(""),[N]=et.Z.useLazyUpgradeQuery(),[S,E]=(0,w.useState)(!1),[I,F]=(0,w.useState)(!1),[D,Z]=(0,w.useState)(1e3);(0,w.useEffect)(()=>{var e;if(!s)return;let t=null==s?void 0:null===(e=s.flowKey)||void 0===e?void 0:e.replace("FlowQuery",""),n=async(e,t,s)=>{let n=await tx(e,t,s,null==l?void 0:l.id).then(e=>e);Z(n)};n(t,null==s?void 0:s.tokenA,null==s?void 0:s.tokenB)},[null==s?void 0:s.flowKey,null==s?void 0:s.tokenA,null==s?void 0:s.tokenB]),(0,w.useEffect)(()=>{if(s){let e=B.find(e=>e.coin===s.coinA);q(null==e?void 0:e.tokenAddress,null==e?void 0:e.superTokenAddress).then(e=>F(e)),r(e)}},[s]),(0,w.useEffect)(()=>{o===u.deposit&&i&&(async()=>{let e=await (0,M.EG)({address:a,chainId:k.yu.id,token:null==i?void 0:i.tokenAddress}).then(e=>null==e?void 0:e.formatted);A(e)})()},[o,i]);let O=()=>{o===u.deposit&&v&&p(v)},L=e=>{null==e||e.preventDefault(),o===u.deposit&&H(a).then(e=>{if(!(0>Number(d))&&(!Object.keys(e).length||!i||0!==Number(e[i.tokenAddress]))&&I){let t=W.O$.from(d).toString();E(!0);let s=N({value:t,tokenAddress:null==i?void 0:i.superTokenAddress});s.then(e=>{e.isSuccess&&f(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),E(e.isLoading),e.isError&&f(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{f(R.Z.hideAlert())},5e3)}).catch(e=>f(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}})},_=e=>{if(e.preventDefault(),s&&o===u.change){if(E(!0),f(R.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!s||!D){f(R.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{f(R.Z.hideAlert())},5e3);return}let t=d;if((null==s?void 0:s.type)===e1.Z6.market){let n=new e0.Z(d),a=n.div(2592e3).times(1e18).div(D).round(0,0).times(D).div(1e18).times(259200).div(3600).div(24).div(30).times(10);t=a.toFixed()}let l={superToken:s.superToken,tokenA:s.tokenA,tokenB:s.tokenB,coinA:s.coinA,coinB:s.coinB,flowKey:s.flowKey,type:s.type},i=b({amount:t,config:l});i.then(e=>{e.isSuccess&&f(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),E(e.isLoading),e.isError&&f(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{f(R.Z.hideAlert())},5e3)}).catch(e=>f(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))}else f(R.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{f(R.Z.hideAlert())},5e3)},P=()=>{E(!0),f(R.Z.showLoadingAlert("Waiting for your transaction to be confirmed...",""));let e=g(s);e.then(e=>{e.isSuccess&&f(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),E(e.isLoading),e.isError&&(console.log("response",e),f(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error)))),setTimeout(()=>{f(R.Z.hideAlert())},5e3)}).catch(e=>{console.log({error:e}),f(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message))))})};return(0,m.jsxs)("div",{className:"flex flex-col space-y-4",children:[!o&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("h6",{className:"text-slate-100",children:[n("position-action"),"?"]}),(0,m.jsx)(ea,{action:"".concat(n("change-swap-amount")),type:"button",handleClick:()=>c(u.change)}),(0,m.jsx)(ea,{action:"".concat(n("deposit")," ").concat(s.coinA),type:"button",handleClick:()=>c(u.deposit)}),(0,m.jsx)(es,{action:S?"".concat(n("stopping"),"..."):"".concat(n("stop-position")),type:"button",loading:S,disabled:S,handleClick:P}),(0,m.jsx)("hr",{className:"border-slate-500"}),(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>t(!1),children:n("cancel")})})]}),o===u.deposit&&(0,m.jsxs)("form",{id:"change-swap-form",className:"flex flex-col space-y-6",onSubmit:L,children:[(0,m.jsxs)("label",{className:"text-slate-100",children:[n("amount-action")," ",n("deposit"),"?"]}),(0,m.jsxs)("div",{className:"relative w-full",children:[(0,m.jsx)("input",{type:"number",step:"any",className:"input-outline",value:d,onChange:e=>x(e.target.value),placeholder:"".concat(n("amount"))}),(0,m.jsx)("button",{type:"button",className:"pr-8 text-primary-500 hover:text-primary-300 hover:font-bold absolute right-2.5 bottom-2.5 font-medium text-sm",onClick:O,children:"Max"})]}),o===u.deposit&&(0,m.jsxs)("p",{children:["Balance: ",v&&i?parseFloat(v).toFixed(3):0," ",s.coinA]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>c(u.none),children:n("cancel")}),(0,m.jsx)(es,{type:"submit",action:S?"".concat(n("confirming"),"..."):"".concat(n("confirm")," ").concat(n("deposit")),primary:!0,loading:S,disabled:!d||S})]})]}),o===u.change&&(0,m.jsxs)("form",{id:"change-swap-form",className:"flex flex-col space-y-6",onSubmit:_,children:[(0,m.jsxs)("label",{className:"text-slate-100",children:[n("desired-swap-amount"),"?"]}),(0,m.jsx)("input",{type:"number",step:"any",className:"input-outline",value:d,onChange:e=>p(e.target.value),placeholder:"".concat(n("swap-amount"))}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",className:"outline-none text-slate-100 underline",onClick:()=>c(u.none),children:n("cancel")}),(0,m.jsx)(es,{type:"submit",action:S?"".concat(n("confirming"),"..."):"".concat(n("confirm-change")),primary:!0,loading:S,disabled:!d||S})]})]})]})},tf=e=>{let t=new Map;return e.length&&e.map(e=>t.set(e.flowKey,[e.coinA,e.coinB])),t},tb=e=>{let{close:t,setClose:s}=e,n=["continuous"],{t:a}=(0,C.$G)("home"),{chain:l}=(0,T.LN)(),[i]=(0,w.useState)((0,e1.st)((null==l?void 0:l.id)||137)),[r,o]=(0,w.useState)(i.map(e=>e.coinA).filter((e,t,s)=>s.indexOf(e)===t)),[c,d]=(0,w.useState)(i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t)),[u,p]=(0,w.useState)(),[x,h]=(0,w.useState)(new Map),[f,b]=(0,w.useState)(Z.sN.SELECT),[g,v]=(0,w.useState)(Z.sN.SELECT),[A,N]=(0,w.useState)("0"),[k,S]=(0,w.useContext)(j.wP),[E,M]=(0,w.useState)(!1),[O,L]=(0,w.useState)(1e3),[_]=et.Z.useLazyStartStreamQuery(),[B,P]=(0,w.useState)(n[0]);(0,w.useEffect)(()=>{var e;if(!u)return;let t=null==u?void 0:null===(e=u.flowKey)||void 0===e?void 0:e.replace("FlowQuery",""),s=async(e,t,s,n)=>{let a=await tx(e,t,s,n).then(e=>e);L(a)};s(t,null==u?void 0:u.tokenA,null==u?void 0:u.tokenB,(null==l?void 0:l.id)||137)},[null==u?void 0:u.flowKey,null==u?void 0:u.tokenA,null==u?void 0:u.tokenB]),(0,w.useEffect)(()=>{if(f!==Z.sN.SELECT){let e=i.filter(e=>e.coinA===f).map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);d([Z.sN.SELECT,...e])}else{let t=i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);d([Z.sN.SELECT,...t])}},[f]),(0,w.useEffect)(()=>{if(g!==Z.sN.SELECT){let e=i.filter(e=>e.coinB===g).map(e=>e.coinA).filter((e,t,s)=>s.indexOf(e)===t);o([Z.sN.SELECT,...e])}else{let t=i.map(e=>e.coinB).filter((e,t,s)=>s.indexOf(e)===t);o([Z.sN.SELECT,...t])}},[g]),(0,w.useEffect)(()=>{if(f!==Z.sN.SELECT&&g!==Z.sN.SELECT){let e=i.find(e=>e.coinA===f&&e.coinB===g);p(e)}},[f,g]),(0,w.useEffect)(()=>{if(u){let e=tf([u]);h(e)}},[u]);let U=e=>{if(e.preventDefault(),f===Z.sN.SELECT||g===Z.sN.SELECT)return;if(!u||!O){S(R.Z.showErrorAlert("Oops!","We were unable to find the selected position. Please try another one.")),setTimeout(()=>{S(R.Z.hideAlert())},5e3);return}if(M(!0),S(R.Z.showLoadingAlert("Waiting for your transaction to be confirmed...","")),!O)return;let t=A;if((null==u?void 0:u.type)===e1.Z6.market){let s=new e0.Z(A),n=s.div(2592e3).times(1e18).div(O).round(0,0).times(O).div(1e18).times(259200).div(3600).div(24).div(30).times(10);t=n.toFixed()}let a=_({amount:t,config:u});a.then(e=>{e.isSuccess&&S(R.Z.showSuccessAlert("Success","Transaction confirmed \uD83D\uDC4C")),M(e.isLoading),e.isError&&S(R.Z.showErrorAlert("Error","".concat(null==e?void 0:e.error))),setTimeout(()=>{S(R.Z.hideAlert())},5e3)}).catch(e=>S(R.Z.showErrorAlert("Error","".concat(e||(null==e?void 0:e.message)))))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"text-primary-500 uppercase",children:a("your-streams")}),(0,m.jsxs)("div",{className:"flex flex-wrap items-center justify-between space-y-8 lg:space-y-0 mt-4",children:[(0,m.jsxs)("form",{id:"new-position-form",className:"flex flex-col items-start lg:p-8 w-full lg:w-1/2 space-y-6",onSubmit:U,children:[(0,m.jsxs)("label",{className:"text-slate-100",children:[a("position-token"),"?"]}),(0,m.jsxs)("div",{className:"flex flex-wrap lg:flex-nowrap items-center lg:space-x-4 w-full lg:w-auto",children:[(0,m.jsx)(eo,{classNames:"relative w-full z-20",value:f,coins:r,handleChange:b}),(0,m.jsx)(eZ.Z,{className:"h-10 w-16"}),(0,m.jsx)(eo,{classNames:"relative w-full z-20",value:g,coins:c,handleChange:v})]}),(0,m.jsxs)("label",{className:"text-slate-100",children:[a("position-amount"),"?"]}),(0,m.jsx)("input",{type:"number",step:"any",className:"input-outline",value:A,onChange:e=>N(e.target.value),placeholder:"".concat(a("amount"))}),(0,m.jsxs)("label",{className:"text-slate-100",children:[a("position-select"),":"]}),(0,m.jsx)(I.R,{value:B,onChange:P,children:(0,m.jsxs)("div",{className:"relative w-full z-10",children:[(0,m.jsxs)(I.R.Button,{className:"relative w-full cursor-default rounded-lg bg-slate-700 py-2 pl-3 pr-10 text-left text-slate-200 shadow-md focus:outline-none focus-visible:border-slate-500 focus-visible:ring-2 focus-visible:ring-slate-100 focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-300 sm:text-sm",children:[(0,m.jsx)("span",{className:"block truncate",children:a("".concat(B.toLocaleLowerCase().replace(/\s/g,"-")))}),(0,m.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,m.jsx)(F.Z,{className:"h-5 w-5 text-slate-100","aria-hidden":"true"})})]}),(0,m.jsx)(y.u,{as:w.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,m.jsx)(I.R.Options,{className:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-slate-700 py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm",children:n.map((e,t)=>(0,m.jsx)(I.R.Option,{className:e=>{let{active:t}=e;return"relative cursor-default select-none py-2 pl-10 pr-4 ".concat(t?"bg-slate-800 text-slate-200":"text-slate-200")},value:e,children:t=>{let{selected:s}=t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"block truncate ".concat(s?"font-medium":"font-normal"),children:a("".concat(e.toLocaleLowerCase().replace(/\s/g,"-")))}),s?(0,m.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,m.jsx)(D.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null,s?(0,m.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3 text-green-600",children:(0,m.jsx)(D.Z,{className:"h-5 w-5","aria-hidden":"true"})}):null]})}},t))})})]})})]}),(0,m.jsx)("div",{className:"w-full lg:w-1/2",children:(0,m.jsx)(eS,{pairs:x})}),(0,m.jsxs)("div",{className:"flex space-x-4 w-full justify-end",children:[(0,m.jsx)("button",{type:"button",className:"text-slate-100 underline",onClick:()=>s(!t),children:a("cancel")}),(0,m.jsx)(es,{type:"submit",form:"new-position-form",loading:E,disabled:E,action:E?"".concat(a("processing"),"..."):"".concat(a("start-new-position"))})]})]})]})};var tg=s(56457);let tv=e=>{let[t,s]=(0,w.useState)(new Map),n=(0,w.useRef)(!1);return(0,w.useEffect)(()=>{if(e.length&&!n.current){let t=tf(e);s(t),n.current=!0}},[e]),(0,w.useEffect)(()=>{n.current&&(n.current=!1)},[]),t};var tj=s(48068);let tA=e=>{let{setClose:t,position:s}=e,{t:n}=(0,C.$G)("home"),[a,l]=(0,w.useState)(!1),[i,r]=(0,w.useState)(0),o=tv([s]),{data:c,isLoading:u,isSuccess:p,isError:y,error:x}=ey.Z.useGetTokenPriceQuery(ef[s.coinB]);return(0,w.useEffect)(()=>{if(c&&p){var e;r(null==c?void 0:null===(e=c[ef[s.coinB]])||void 0===e?void 0:e.usd)}y&&console.error(x)},[c,p]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:"flex items-center justify-start border-b border-slate-600 space-x-4 mb-6 lg:mb-12 pb-2",children:[(0,m.jsxs)("button",{type:"button",className:"outline-none text-primary-500 space-x-2",onClick:()=>t(!0),children:[(0,m.jsx)("span",{className:"no-underline",children:"<"}),(0,m.jsx)("span",{className:"underline",children:n("show-all")})]}),(0,m.jsx)("button",{type:"button",className:g(a?"outline-none text-slate-500 pointer-events-none":"outline-none text-primary-500 underline cursor-pointer"),onClick:()=>l(!0),disabled:a,children:a?"".concat(n("editing-position"),"..."):"".concat(n("edit-position"))})]}),(0,m.jsxs)("div",{className:"flex flex-wrap items-start justify-between space-y-4 md:space-y-0",children:[(0,m.jsxs)("div",{className:"w-full md:w-1/2",children:[(0,m.jsx)("span",{className:"flex items-center justify-start",children:(0,m.jsx)(eO,{coinA:s.coinA,coinB:s.coinB,type:d.ViewPosition})}),(0,m.jsxs)("p",{className:"text-slate-100 my-2",children:[(0,m.jsxs)("span",{className:"text-slate-400",children:[n("total-streamed"),":"]})," ",s.input.toFixed(3)," ",s.coinA,"x (",v(parseFloat(s.streamedUsdValue)),")"]}),(0,m.jsxs)("p",{className:"text-slate-100 my-2",children:[(0,m.jsxs)("span",{className:"text-slate-400",children:[n("stream-rate"),":"]})," ",parseFloat(s.output).toFixed(3)," ",s.coinA,"x (",v(parseFloat(s.rateUsdValue)),")"]})]}),!a&&(0,m.jsx)("div",{className:"w-full md:w-1/2",children:(0,m.jsx)(eS,{pairs:o,position:s})}),a&&(0,m.jsx)("div",{className:"w-full md:w-1/2 mt-4",children:(0,m.jsx)(th,{setClose:l,position:s})})]})]})},tw=["your markets","stream rate","total streamed"],tN=e=>{let{positions:t,queries:s}=e,{t:n}=(0,C.$G)("home"),[a,l]=(0,w.useState)([]),[i,r]=(0,w.useState)(new Map),[o,c]=(0,w.useState)(!0),d=ex(),u=tv(t),p=eb(u),[y,x]=(0,w.useState)([["0","0"]]),[h,f]=(0,w.useState)(),[b,g]=(0,w.useState)(!0),{address:v,isConnected:j}=(0,T.mA)(),[A]=tj.Z.useQuerySushiPoolPricesMutation();return(0,w.useEffect)(()=>{if(p.size>0&&u.size>0){let e=[];for(let[t,s]of u){if(s[0]===Z.sN.USDC||s[0]===Z.sN.IbAlluoUSD||s[0]===Z.sN.StIbAlluoUSD||s[0]===Z.sN.DAI){let{priceSorted:n}=eg(p.get(ef[s[1]]));n.length&&(e.push([n[0][1],n[n.length-1][1]]),x(e))}if(s[1]===Z.sN.USDC||s[1]===Z.sN.IbAlluoUSD||s[1]===Z.sN.StIbAlluoUSD||s[1]===Z.sN.DAI){let{priceSorted:a}=eg(p.get(ef[s[0]]));a.length&&(e.push([a[0][1],a[a.length-1][1]]),x(e))}}}},[p,u]),(0,w.useEffect)(()=>{let e=O.ow.map(async e=>{let t=await (0,M.EG)({address:v,chainId:k.yu.id,token:e}).then(e=>null==e?void 0:e.formatted);return{token:e,balance:t}});Promise.all(e).then(e=>{let t=new Map;e.map(e=>t.set(null==e?void 0:e.token,null==e?void 0:e.balance)),r(t)})},[v,j]),(0,w.useEffect)(()=>{if(v&&j&&s.size>0&&t.length>0){let e=[];t.map((t,n)=>{var a,l,i,r,o,c,u,p,m;e.push({...t,positions:(null===(a=s.get(null==t?void 0:t.flowKey))||void 0===a?void 0:a.totalFlows)||0,rateUsdValue:e3(null===(l=s.get(null==t?void 0:t.flowKey))||void 0===l?void 0:l.placeholder,d.get(null==t?void 0:t.tokenA)),streamedUsdValue:e3(null===(i=s.get(null==t?void 0:t.flowKey))||void 0===i?void 0:null===(r=i.streamedSoFar)||void 0===r?void 0:r.toFixed(0),d.get(null==t?void 0:t.tokenA)),input:(null===(o=s.get(null==t?void 0:t.flowKey))||void 0===o?void 0:o.streamedSoFar)||0,output:null===(c=s.get(null==t?void 0:t.flowKey))||void 0===c?void 0:c.placeholder,avgBuyPrice:y.length&&(null===(u=y[n])||void 0===u?void 0:u.length)?((+(null==y?void 0:null===(p=y[n])||void 0===p?void 0:p[0])+ +(null==y?void 0:null===(m=y[n])||void 0===m?void 0:m[1]))/2).toFixed(3):"0"})}),l(e)}},[v,j,y,t,s,d]),(0,m.jsxs)(m.Fragment,{children:[o&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsx)(eH,{content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{className:"text-primary-500 uppercase",children:n("your-streams")}),(0,m.jsx)(es,{icon:(0,m.jsx)(tg.Z,{className:"h-4 w-4"}),type:"button",action:"".concat(n("new-position")),handleClick:()=>{c(!1)}})]})}),b&&(a.length?(0,m.jsx)(eU,{headers:tw,rowData:a,tableLoaderRows:12,selectable:!0,selectData:e=>{f(e),g(!1)}}):(0,m.jsxs)("p",{className:"italic",children:[n("no-positions"),"..."]})),!b&&(0,m.jsx)(tA,{close:b,setClose:g,position:h})]}),!o&&(0,m.jsx)(tb,{close:o,setClose:c})]})};var tT=s(59721),tk=s(64202);let tS=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"id",type:"string"}],name:"AffiliateApplied",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"affiliateId",type:"string"}],name:"AffiliateWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"customer",type:"address"}],name:"OrganicCustomerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"customer",type:"address"},{indexed:!1,internalType:"address",name:"affiliate",type:"address"},{indexed:!1,internalType:"string",name:"affiliateId",type:"string"}],name:"ReferredCustomerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"APP_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"addressToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"",type:"string"}],name:"affiliateIdToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"affiliates",outputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"id",type:"string"},{internalType:"bool",name:"enabled",type:"bool"},{internalType:"uint256",name:"totalRef",type:"uint256"},{internalType:"address",name:"addr",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"affiliateId",type:"string"}],name:"applyForAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAddress",type:"address"}],name:"changeAffiliateAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"customerToAffiliate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"disableAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"customerAddr",type:"address"}],name:"getAffiliateAddress",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"uint256",name:"index",type:"uint256"}],name:"getRoleMember",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleMemberCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"isAffiliateEnabled",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isCustomerOrganic",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddr",type:"address"}],name:"registerApp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"customerAddr",type:"address"},{internalType:"string",name:"affiliateId",type:"string"}],name:"safeRegisterCustomer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"contractAddr",type:"address"}],name:"unregisterApp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"affiliateId",type:"string"}],name:"verifyAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdrawAffiliate",outputs:[],stateMutability:"nonpayable",type:"function"}];(r=p||(p={})).INACTIVE="inactive",r.REGISTERING="registering",r.AWAITING_VERIFICATION="awaitingVerification",r.ENABLED="enabled";let tE=e=>{let t=[[new Blob([e]).size<=32,"Cannot be larger than 32 characters (Some characters count as 2)"],[e.length>1,"Must be at least 2 characters"]];return t},tC=e=>tE(e).reduce((e,t)=>!1===t[0]?[...e,t[1]]:e,[]),tI=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{},n=await (0,M.a4)({address:t,abi:tS,functionName:"addressToAffiliate",args:[e.toLowerCase()]}),a=await (0,M.a4)({address:t,abi:tS,functionName:"affiliates",args:[n]});return W.O$.from(a.addr).isZero()?p.INACTIVE:!1===a.enabled?p.AWAITING_VERIFICATION:0===tC(a.id).length?(s(a.id),p.ENABLED):void 0},tF=()=>{let{t:e}=(0,C.$G)("home"),{address:t,isConnected:s}=(0,T.mA)(),[n,a]=(0,w.useState)("Copy"),[l,i]=(0,w.useState)("pro.ricochet-exchange.eth.limo/#/ref/"),[r,o]=(0,w.useState)(),[c,d]=(0,w.useState)(!1),[u,y]=(0,w.useState)([]),[x,h]=(0,w.useState)(),[f,b]=(0,w.useState)(O.CU),{chain:v}=(0,T.LN)();(0,w.useEffect)(()=>{h(null==t?void 0:t.toLowerCase().slice(0,10))},[t,s]),(0,w.useEffect)(()=>{v&&(80001===v.id&&b(L.mr),137===v.id&&b(O.CU),10===v.id&&b(_.aq))},[null==v?void 0:v.id]),(0,w.useEffect)(()=>{(async()=>{if(t&&s&&f){if((null==v?void 0:v.id)!==137)return o(p.INACTIVE);let e=await tI(t,f,h);o(e)}})()},[t,s,f]),(0,w.useEffect)(()=>{if(r===p.REGISTERING&&t&&s&&f){let e=setInterval(async()=>{let e=await tI(t,f,h);o(e)},5e3);return()=>clearInterval(e)}},[r,t,s,f]);let j=()=>{navigator.clipboard.writeText("".concat(l).concat(x)).then(()=>{a("Copied!"),setTimeout(()=>{a("Copy")},3e3)}).catch()},A=e=>{let{value:t}=e.target;h(t),y(tC(t))},N=async e=>{null==e||e.preventDefault(),d(!0);let s=await (0,M.$q)({address:f,abi:tS,functionName:"applyForAffiliate",args:[x,x]}),n=await (0,M.n9)(s);n.wait().then(e=>{e&&(o(p.REGISTERING),(async()=>{let e=await (0,M.$q)({address:f,abi:tS,functionName:"applyForAffiliate",args:[x,x],overrides:{from:t}}),s=await (0,M.n9)(e);s.wait().then(e=>d(!1))})()),d(!1)}).catch(e=>{o(p.INACTIVE),y(["Error registering this url: possible duplicate. Please try another url"]),console.error(e)})};return(0,m.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-center text-slate-100 space-x-3",children:[(0,m.jsx)(tT.Z,{className:"h-6 w-6"}),(0,m.jsx)("p",{className:"uppercase tracking-widest",children:e("refer")})]}),(0,m.jsx)("p",{className:"text-slate-100",children:e("apply-refer")}),s&&(r===p.INACTIVE||r===p.REGISTERING)&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{className:"text-slate-400",children:[e("customize-url"),":"]}),(0,m.jsxs)("form",{onSubmit:N,className:"w-full space-y-4",children:[(0,m.jsxs)("div",{className:g(u.length>0?"border-red-700":"border-primary-500","inline-flex py-2 pl-3 w-full border rounded-lg"),children:[(0,m.jsx)("div",{className:"w-2/3 text-primary-700 truncate",children:(0,m.jsx)("span",{children:l})}),(0,m.jsx)("input",{type:"text",defaultValue:x,onChange:e=>A(e),className:"w-1/3 pl-1 pr-3 text-primary-100 placeholder-primary-500 bg-transparent focus:outline-none dark:placeholder-primary-500 ",placeholder:"".concat(e("referral-url"))})]}),u.map(t=>(0,m.jsx)("p",{className:"text-red-700 text-xs italic",children:e(t)},t)),(0,m.jsx)(el,{type:"submit",loading:c,disabled:c,primary:!0,action:c?"".concat(e("registering"),"..."):e("register-url")})]})]}),!s&&(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,m.jsxs)("p",{className:"text-primary-500",children:[e("connect-for-referrals"),"."]}),(0,m.jsx)(tt.x3.Custom,{children:t=>{let{isConnected:s,show:n}=t;return(0,m.jsx)(m.Fragment,{children:!s&&(0,m.jsx)(ea,{action:"".concat(e("connect-wallet")),type:"button",handleClick:n})})}})]}),s&&r===p.AWAITING_VERIFICATION&&(0,m.jsx)("div",{children:(0,m.jsxs)("p",{children:[e("Awaiting verification. Come back later or ping us on our discord:"),(0,m.jsx)("br",{}),(0,m.jsx)(tu,{className:"text-slate-200 underline",href:"https://discord.gg/mss4t2ED3y",target:"_blank",rel:"noreferrer",children:"https://discord.gg/mss4t2ED3y"})]})}),s&&r===p.ENABLED&&(0,m.jsxs)("div",{className:"flex flex-col justify-start items-center gap-1",children:[(0,m.jsx)("p",{children:e("your-referral-url")}),(0,m.jsx)("p",{children:l+x}),(0,m.jsxs)("button",{className:"flex justify-center items-center gap-1",onClick:j,children:[(0,m.jsx)(tk.Z,{className:"h-5 w-5"})," ",e(n)]})]}),(0,m.jsx)("a",{className:"inline-flex items-center space-x-1 text-primary-400",href:"https://docs.ricochet.exchange/readme/referral-program",target:"_blank",rel:"noopener noreferrer",children:(0,m.jsx)("span",{className:"underline",children:e("how-does-it-work")})})]})},tD=(e,t)=>{let s=null==e?void 0:e.reduce((e,s)=>s.token.id===t.toLowerCase()?e+parseInt(s.currentFlowRate,10):e,0);return(s/1e18*2592e3).toFixed(3)},tR=(e,t,s)=>{let n=null==e?void 0:e.reduce((e,n)=>{var a,l;return(null==n?void 0:null===(a=n.token)||void 0===a?void 0:a.id)===(null==t?void 0:t.toLowerCase())&&(null==n?void 0:null===(l=n.sender)||void 0===l?void 0:l.id)===(null==s?void 0:s.toLowerCase())?e+parseInt(n.currentFlowRate,10):e},0);return n},tM=(e,t,s,n,a)=>{let l,i;let r=e1.X7.find(t=>t.flowKey===e),o=(null==r?void 0:r.superToken)||"",c=(null==r?void 0:r.tokenA)||"",d=s.get(o),u=tR(null==d?void 0:d.inflows,c,t);Object.keys(n).length>0&&(l=n["".concat(c.toLowerCase(),"-").concat(o.toLowerCase())]),Object.keys(a).length>0&&(i=a["".concat(c.toLowerCase(),"-").concat(o.toLowerCase())]);let p=(u/1e18*2592e3).toFixed(6),m=tD(null==d?void 0:d.inflows,c),y=null==d?void 0:d.inflows.filter(e=>"0"!==e.currentFlowRate);return{flowKey:e,flowsReceived:u,flowsOwned:m,totalFlows:(null==y?void 0:y.length)||0,placeholder:p,streamedSoFar:l,receivedSoFar:i,subsidyRate:{perso:0,total:0,endDate:"unknown"}}},tZ=(e,t,s)=>{let n=W.O$.from(e),a=W.O$.from(s),l=W.O$.from(t).mul(1e3),i=W.O$.from(new Date().getTime());return a.isZero()?ee.formatEther(n):ee.formatEther(n.add(i.sub(l).mul(a).div(1e3)))};var tO=s(68552),tL=s(9008),t_=s.n(tL),tB=s(20640);let tP=e=>({10:"/protocol-v1-optimism-mainnet",137:"/protocol-v1-matic",80001:"/protocol-v1-mumbai"})[e],tU=e1.X7.map(e=>e.superToken);var tG=!0;function tQ(){let e=function(){let[e,t]=w.useState(!1);return w.useEffect(()=>t(!0),[]),e}(),{t}=(0,C.$G)("home"),{address:s,isConnected:n}=(0,T.mA)(),[a,l]=(0,w.useState)(new e0.Z(0)),[i,r]=(0,w.useState)("0"),[o,c]=(0,w.useState)(!1),{chain:d}=(0,T.LN)(),u=(0,T.yL)({chainId:(null==d?void 0:d.id)||k.yu.id}),[p,y]=(0,w.useState)(),{data:x,isLoading:h,isSuccess:f,isError:b,error:g}=ey.Z.useGetTokenPriceQuery("richochet"),{data:j,isSuccess:A,isError:E,error:I}=ey.Z.useGetUpgradedTokensListQuery(),[F,D]=(0,w.useState)(new Map),[R,Z]=(0,w.useState)({}),[L,_]=(0,w.useState)([]),[G,Q]=(0,w.useState)([]),[z,W]=(0,w.useState)(0),[V,$]=(0,w.useState)(new Map),[K,q]=(0,w.useState)([0]),[J,X]=(0,w.useState)(0),[Y,ee]=(0,w.useState)(!1),[et,es]=(0,w.useState)(!1),[en,el]=(0,w.useState)([]),ei=ex(),[er]=tB.Z.useQueryFlowsMutation(),[eo]=tB.Z.useQueryStreamsMutation(),[ec]=tB.Z.useQueryReceivedMutation(),[ed,eu]=(0,w.useState)();(0,w.useEffect)(()=>{d&&((null==d?void 0:d.id)===80001&&eu(P),(null==d?void 0:d.id)===137&&eu(B),(null==d?void 0:d.id)===10&&eu(U),y((0,e1.st)(null==d?void 0:d.id)))},[null==d?void 0:d.id]),(0,w.useEffect)(()=>{n&&H(s).then(e=>Z(e))},[s,n,null==d?void 0:d.id]),(0,w.useEffect)(()=>{let e=tU.map(async e=>await er({queryAddress:e,network:tP((null==d?void 0:d.id)||137)}).then(e=>{var t,s;return null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:s.account}));Promise.all(e).then(e=>el(e))},[e,s,n,null==d?void 0:d.id]);let ep=(e,t)=>{(e||[]).forEach(e=>{let s=t["".concat(e.token.id,"-").concat(e.receiver.id)]||0;Object.assign(t,{["".concat(e.token.id,"-").concat(e.receiver.id)]:Number(s)+Number(tZ(e.streamedUntilUpdatedAt,e.updatedAtTimestamp,e.currentFlowRate))})})},em=(e,t)=>{(e||[]).forEach(e=>{let s=t["".concat(e.token.id,"-").concat(e.sender.id)]||0;Object.assign(t,{["".concat(e.token.id,"-").concat(e.sender.id)]:Number(s)+Number(tZ(e.streamedUntilUpdatedAt,e.updatedAtTimestamp,e.currentFlowRate))})})},eh=(e,t)=>{let n=new Map;tU.forEach((e,t)=>{en.length>0&&(null!==en[t]?n.set(e,en[t]):n.set(e,{inflows:[],outflows:[]}))});let a=new Map;if(n.size>0)for(let[l,i]of Object.entries(e1.he))a.set(i,tM(i,s,n,e,t));D(a)},eb=async()=>{let e={},t={};s&&(await eo({address:s,network:tP(null==d?void 0:d.id)}).then(t=>{var s,n;ep(null==t?void 0:null===(s=t.data)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.streams,e)}),await ec({receiver:s,network:tP(null==d?void 0:d.id)}).then(e=>{var s,n;em(null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.streams,t)})),eh(e,t)},eg=e=>{let t=[O.Ne,O.gI,O.PV,O.Xr,O.dU,O.q9,O.MJ];return!!t.includes(e)};(0,w.useEffect)(()=>{en.length>0&&eb()},[en,s,n,null==d?void 0:d.id]),(0,w.useEffect)(()=>{if(n&&s&&e&&p){let t=p.filter(e=>{var t;let{flowKey:s}=e;return parseFloat(null===(t=F.get(s))||void 0===t?void 0:t.placeholder)>0});Q(t)}},[F,s,n,e,p,null==d?void 0:d.id]),(0,w.useEffect)(()=>{if(n&&E&&console.error(I),n&&A&&ed){es(!0);let e=ed.reduce((e,t)=>{let s=Object.keys(R).length&&j&&Object.keys(ef).length&&(parseFloat(R[t.superTokenAddress])*parseFloat(j[ef[t.coin]].usd)).toFixed(6);return isNaN(+s)?e+0:e+parseFloat(s)},0);W(e),es(!1)}},[n,s,R,j,A,null==d?void 0:d.id,ed]),(0,w.useEffect)(()=>{ei.size>0&&F.size>0&&p&&_(p.filter(e=>e.type===e1.Z6.market).sort((e,t)=>{let s=parseFloat(e5(e,F,ei)),n=parseFloat(e5(t,F,ei));return n-s}))},[F,ei,null==d?void 0:d.id,p]),(0,w.useEffect)(()=>{if(L.length){ee(!0);let e=new Map;(async()=>await Promise.all(L.map(async t=>{eg(t.superToken)&&await (0,M.a4)({address:t.superToken,abi:tm,functionName:(null==d?void 0:d.id)===137?"getOutputPool":"outputPools",args:(null==d?void 0:d.id)===137?[3]:[1]}).then(s=>{let n=(Number(s.emissionRate)/1e18*2592e3).toFixed(4);e.set(t.superToken,n.toString())}).catch(e=>{console.log("error",e)})})).then(t=>$(e)))()}},[L,null==d?void 0:d.id]),(0,w.useEffect)(()=>{L.length&&F.size>0&&V.size>0&&L.map(e=>{var t,s;let n=+(null===(t=F.get(e.flowKey))||void 0===t?void 0:t.placeholder)/+(null===(s=F.get(e.flowKey))||void 0===s?void 0:s.flowsOwned)*100,a=+n/100*+V.get(e.superToken);a&&q(e=>[...e,a])})},[V,F,L,null==d?void 0:d.id]),(0,w.useEffect)(()=>{if(K.length){let e=K.filter((e,t,s)=>s.indexOf(e)===t).reduce((e,t)=>e+t,0);X(e),ee(!1)}},[K,null==d?void 0:d.id]),(0,w.useEffect)(()=>{if(n&&x&&f){var e;l(new e0.Z(parseFloat(null==x?void 0:null===(e=x.richochet)||void 0===e?void 0:e.usd)))}b&&console.error(g)},[n,s,x,f,null==d?void 0:d.id]);let ev=async()=>{c(!0),await (0,tO.x)((null==d?void 0:d.id)||137).then(async e=>{if(G.length>0){let t=G.map(async t=>{await e.cfaV1.getNetFlow({superToken:t.tokenA,account:s,providerOrSigner:u})});Promise.all(t).then(e=>{let t=e.reduce((e,t)=>e+parseFloat(t),0).toFixed(0);if(isNaN(+t))return;let s=new e0.Z(t),n=s.times(new e0.Z("2592000")).div(new e0.Z("10e17")).times(a).toFixed(0);r(n),c(!1)})}c(!1)}).catch(e=>c(!1))};return((0,w.useEffect)(()=>{n&&a&&(null==d?void 0:d.id)&&G&&ev()},[n]),e)?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(t_(),{children:[(0,m.jsx)("title",{children:"Ricochet | Streaming Exchange"}),(0,m.jsx)("meta",{name:"description",content:"Automatic Real-Time Crypto Investing"}),(0,m.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,m.jsx)("link",{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"})]}),(0,m.jsxs)("div",{className:"bg-gradient-to-b from-background-700 via-background-800 to-background-900 overflow-clip",children:[(0,m.jsx)(tp,{}),(0,m.jsx)("main",{children:(0,m.jsxs)("div",{className:"mx-auto w-screen py-6 px-8 lg:px-16",children:[(0,m.jsx)(N,{}),n&&(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 justify-items-stretch place-items-stretch gap-10",children:[(0,m.jsx)(eq,{content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("total-in-positions")}),et&&!z&&(0,m.jsx)("div",{className:"animate-pulse",children:(0,m.jsx)("div",{className:"h-4 rounded bg-slate-700"})}),(z||0===z)&&!et&&(0,m.jsx)("p",{className:"text-slate-100 font-light text-2xl",children:v(z)})]})}),(0,m.jsx)(eq,{content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("net-flow-rate")}),o&&!i&&(0,m.jsx)("div",{className:"animate-pulse",children:(0,m.jsx)("div",{className:"h-4 rounded bg-slate-700"})}),i&&!o&&(0,m.jsxs)("p",{className:"text-slate-100 font-light text-2xl",children:[v(parseFloat(i))," / ",t("month")]})]})}),(0,m.jsx)(eq,{content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("ric-balance")}),(0,m.jsx)("div",{className:"text-slate-100 font-light text-2xl space-x-1",children:(0,m.jsx)(S,{tokenAddress:(0,O.P3)((null==d?void 0:d.id)||137),showSymbol:!0})})]})}),(0,m.jsx)(eq,{content:(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("h6",{className:"font-light uppercase tracking-widest text-primary-500 mb-2",children:t("rewards-earned")}),Y&&!J&&(0,m.jsx)("p",{className:"text-slate-100 font-light text-2xl",children:"0 RIC / mo"}),(J||0===J)&&!Y&&(0,m.jsxs)("p",{className:"text-slate-100 font-light text-2xl",children:[J.toFixed(2)," RIC / mo"]})]})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10 place-content-stretch mt-16",children:[(0,m.jsxs)("div",{className:"lg:col-span-2 space-y-10",children:[(0,m.jsx)(eK,{content:n?(0,m.jsx)(tN,{positions:G,queries:F}):(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 h-96",children:[(0,m.jsxs)("p",{className:"text-primary-500",children:[t("connect-for-positions"),"."]}),(0,m.jsx)(tt.x3.Custom,{children:e=>{let{isConnected:s,show:n}=e;return(0,m.jsx)(m.Fragment,{children:!s&&(0,m.jsx)(ea,{action:"".concat(t("connect-wallet")),type:"button",handleClick:n})})}})]})}),(0,m.jsx)(eK,{content:L&&(0,m.jsx)(e8,{coingeckoPrices:ei,sortedList:L,queries:F})})]}),(0,m.jsxs)("div",{className:"space-y-10",children:[(0,m.jsx)(e$,{content:(0,m.jsx)(e2,{})}),(0,m.jsx)(eW,{content:n?(0,m.jsx)(eQ,{tokens:j,balances:R}):(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 h-96",children:[(0,m.jsxs)("p",{className:"text-primary-500",children:[t("connect-for-balances"),"."]}),(0,m.jsx)(tt.x3.Custom,{children:e=>{let{isConnected:s,show:n}=e;return(0,m.jsx)(m.Fragment,{children:!s&&(0,m.jsx)(ea,{action:"".concat(t("connect-wallet")),type:"button",handleClick:n})})}})]})}),(0,m.jsx)(eV,{content:(0,m.jsx)(tF,{})})]})]})]})}),(0,m.jsx)(eX,{})]})]}):(0,m.jsx)(m.Fragment,{})}}},function(e){e.O(0,[698,774,888,179],function(){return e(e.s=53124)}),_N_E=e.O()}]);